========================================
­ƒôï TABLAS EN LA BASE DE DATOS
========================================

 schemaname |              tablename               | tableowner 
------------+--------------------------------------+------------
 public     | abonos                               | postgres
 public     | abonos_historial                     | postgres
 public     | audit_log_seguridad                  | postgres
 public     | categorias_documento                 | postgres
 public     | categorias_documento_backup_20251017 | postgres
 public     | cliente_intereses                    | postgres
 public     | clientes                             | postgres
 public     | configuracion_recargos               | postgres
 public     | documentos_cliente                   | postgres
 public     | documentos_proyecto                  | postgres
 public     | fuentes_pago                         | postgres
 public     | manzanas                             | postgres
 public     | negociaciones                        | postgres
 public     | plantillas_proceso                   | postgres
 public     | procesos_negociacion                 | postgres
 public     | proyectos                            | postgres
 public     | renuncias                            | postgres
 public     | viviendas                            | postgres
(18 rows)


========================================

­ƒôØ ESTRUCTURA COMPLETA DE TODAS LAS TABLAS

              table_name              |        column_name         |        data_type         | character_maximum_length | is_nullable |            column_default             | ordinal_position 
--------------------------------------+----------------------------+--------------------------+--------------------------+-------------+---------------------------------------+------------------
 abonos                               | id                         | uuid                     |                          | NO          | uuid_generate_v4()                    |                1
 abonos                               | vivienda_id                | uuid                     |                          | NO          |                                       |                2
 abonos                               | cliente_id                 | uuid                     |                          | NO          |                                       |                3
 abonos                               | monto                      | numeric                  |                          | NO          |                                       |                4
 abonos                               | fecha_abono                | timestamp with time zone |                          | NO          |                                       |                5
 abonos                               | metodo_pago                | character varying        |                      100 | NO          |                                       |                6
 abonos                               | comprobante                | text                     |                          | YES         |                                       |                7
 abonos                               | observaciones              | text                     |                          | YES         |                                       |                8
 abonos                               | fecha_creacion             | timestamp with time zone |                          | YES         | now()                                 |                9
 abonos_historial                     | id                         | uuid                     |                          | NO          | gen_random_uuid()                     |                1
 abonos_historial                     | negociacion_id             | uuid                     |                          | NO          |                                       |                2
 abonos_historial                     | fuente_pago_id             | uuid                     |                          | NO          |                                       |                3
 abonos_historial                     | monto                      | numeric                  |                          | NO          |                                       |                4
 abonos_historial                     | fecha_abono                | timestamp with time zone |                          | NO          |                                       |                5
 abonos_historial                     | metodo_pago                | character varying        |                       50 | NO          |                                       |                6
 abonos_historial                     | numero_referencia          | character varying        |                      100 | YES         |                                       |                7
 abonos_historial                     | comprobante_url            | text                     |                          | YES         |                                       |                8
 abonos_historial                     | notas                      | text                     |                          | YES         |                                       |                9
 abonos_historial                     | fecha_creacion             | timestamp with time zone |                          | NO          | now()                                 |               10
 abonos_historial                     | fecha_actualizacion        | timestamp with time zone |                          | NO          | now()                                 |               11
 abonos_historial                     | usuario_registro           | uuid                     |                          | YES         |                                       |               12
 audit_log_seguridad                  | id                         | uuid                     |                          | NO          | uuid_generate_v4()                    |                1
 audit_log_seguridad                  | tipo                       | character varying        |                       50 | NO          |                                       |                2
 audit_log_seguridad                  | usuario_email              | character varying        |                      255 | NO          |                                       |                3
 audit_log_seguridad                  | usuario_id                 | uuid                     |                          | YES         |                                       |                4
 audit_log_seguridad                  | ip_address                 | inet                     |                          | YES         |                                       |                5
 audit_log_seguridad                  | user_agent                 | text                     |                          | YES         |                                       |                6
 audit_log_seguridad                  | metadata                   | jsonb                    |                          | YES         | '{}'::jsonb                           |                7
 audit_log_seguridad                  | pais                       | character varying        |                      100 | YES         |                                       |                8
 audit_log_seguridad                  | ciudad                     | character varying        |                      100 | YES         |                                       |                9
 audit_log_seguridad                  | fecha_evento               | timestamp with time zone |                          | YES         | CURRENT_TIMESTAMP                     |               10
 categorias_documento                 | id                         | uuid                     |                          | NO          | uuid_generate_v4()                    |                1
 categorias_documento                 | user_id                    | uuid                     |                          | NO          |                                       |                2
 categorias_documento                 | nombre                     | character varying        |                      100 | NO          |                                       |                3
 categorias_documento                 | descripcion                | text                     |                          | YES         |                                       |                4
 categorias_documento                 | color                      | character varying        |                       20 | YES         | 'blue'::character varying             |                5
 categorias_documento                 | icono                      | character varying        |                       50 | YES         | 'Folder'::character varying           |                6
 categorias_documento                 | orden                      | integer                  |                          | YES         | 0                                     |                7
 categorias_documento                 | fecha_creacion             | timestamp with time zone |                          | YES         | now()                                 |                8
 categorias_documento                 | modulos_permitidos         | ARRAY                    |                          | NO          | '{proyectos}'::text[]                 |                9
 categorias_documento                 | es_global                  | boolean                  |                          | NO          | false                                 |               10
 categorias_documento_backup_20251017 | id                         | uuid                     |                          | YES         |                                       |                1
 categorias_documento_backup_20251017 | user_id                    | uuid                     |                          | YES         |                                       |                2
 categorias_documento_backup_20251017 | nombre                     | character varying        |                      100 | YES         |                                       |                3
 categorias_documento_backup_20251017 | descripcion                | text                     |                          | YES         |                                       |                4
 categorias_documento_backup_20251017 | color                      | character varying        |                       20 | YES         |                                       |                5
 categorias_documento_backup_20251017 | icono                      | character varying        |                       50 | YES         |                                       |                6
 categorias_documento_backup_20251017 | orden                      | integer                  |                          | YES         |                                       |                7
 categorias_documento_backup_20251017 | fecha_creacion             | timestamp with time zone |                          | YES         |                                       |                8
 cliente_intereses                    | id                         | uuid                     |                          | NO          | gen_random_uuid()                     |                1
 cliente_intereses                    | cliente_id                 | uuid                     |                          | NO          |                                       |                2
 cliente_intereses                    | proyecto_id                | uuid                     |                          | NO          |                                       |                3
 cliente_intereses                    | vivienda_id                | uuid                     |                          | YES         |                                       |                4
 cliente_intereses                    | notas                      | text                     |                          | YES         |                                       |                5
 cliente_intereses                    | estado                     | character varying        |                       20 | NO          | 'Activo'::character varying           |                6
 cliente_intereses                    | motivo_descarte            | text                     |                          | YES         |                                       |                7
 cliente_intereses                    | fecha_interes              | timestamp with time zone |                          | NO          | now()                                 |                8
 cliente_intereses                    | fecha_actualizacion        | timestamp with time zone |                          | NO          | now()                                 |                9
 cliente_intereses                    | usuario_creacion           | uuid                     |                          | YES         |                                       |               10
 cliente_intereses                    | valor_estimado             | numeric                  |                          | YES         |                                       |               11
 cliente_intereses                    | origen                     | character varying        |                       50 | YES         |                                       |               12
 cliente_intereses                    | prioridad                  | character varying        |                       20 | YES         | 'Media'::character varying            |               13
 cliente_intereses                    | fecha_ultimo_contacto      | timestamp with time zone |                          | YES         |                                       |               14
 cliente_intereses                    | proximo_seguimiento        | timestamp with time zone |                          | YES         |                                       |               15
 cliente_intereses                    | negociacion_id             | uuid                     |                          | YES         |                                       |               16
 cliente_intereses                    | fecha_conversion           | timestamp with time zone |                          | YES         |                                       |               17
 clientes                             | id                         | uuid                     |                          | NO          | gen_random_uuid()                     |                1
 clientes                             | nombres                    | character varying        |                      100 | NO          |                                       |                2
 clientes                             | apellidos                  | character varying        |                      100 | NO          |                                       |                3
 clientes                             | nombre_completo            | character varying        |                      200 | YES         |                                       |                4
 clientes                             | tipo_documento             | character varying        |                       10 | NO          | 'CC'::character varying               |                5
 clientes                             | numero_documento           | character varying        |                       20 | NO          |                                       |                6
 clientes                             | fecha_nacimiento           | date                     |                          | YES         |                                       |                7
 clientes                             | telefono                   | character varying        |                       20 | YES         |                                       |                8
 clientes                             | telefono_alternativo       | character varying        |                       20 | YES         |                                       |                9
 clientes                             | email                      | character varying        |                      100 | YES         |                                       |               10
 clientes                             | direccion                  | text                     |                          | YES         |                                       |               11
 clientes                             | ciudad                     | character varying        |                      100 | YES         | 'Cali'::character varying             |               12
 clientes                             | departamento               | character varying        |                      100 | YES         | 'Valle del Cauca'::character varying  |               13
 clientes                             | estado                     | character varying        |                       20 | NO          | 'Interesado'::character varying       |               14
 clientes                             | origen                     | character varying        |                       50 | YES         |                                       |               15
 clientes                             | referido_por               | character varying        |                      200 | YES         |                                       |               16
 clientes                             | documento_identidad_url    | text                     |                          | YES         |                                       |               17
 clientes                             | notas                      | text                     |                          | YES         |                                       |               18
 clientes                             | fecha_creacion             | timestamp with time zone |                          | NO          | now()                                 |               19
 clientes                             | fecha_actualizacion        | timestamp with time zone |                          | NO          | now()                                 |               20
 clientes                             | usuario_creacion           | uuid                     |                          | YES         |                                       |               21
 configuracion_recargos               | id                         | uuid                     |                          | NO          | uuid_generate_v4()                    |                1
 configuracion_recargos               | tipo                       | character varying        |                       50 | NO          |                                       |                2
 configuracion_recargos               | nombre                     | character varying        |                      100 | NO          |                                       |                3
 configuracion_recargos               | valor                      | numeric                  |                          | NO          |                                       |                4
 configuracion_recargos               | descripcion                | text                     |                          | YES         |                                       |                5
 configuracion_recargos               | activo                     | boolean                  |                          | YES         | true                                  |                6
 configuracion_recargos               | fecha_creacion             | timestamp with time zone |                          | YES         | now()                                 |                7
 configuracion_recargos               | fecha_actualizacion        | timestamp with time zone |                          | YES         | now()                                 |                8
 documentos_cliente                   | id                         | uuid                     |                          | NO          | uuid_generate_v4()                    |                1
 documentos_cliente                   | cliente_id                 | uuid                     |                          | NO          |                                       |                2
 documentos_cliente                   | categoria_id               | uuid                     |                          | YES         |                                       |                3
 documentos_cliente                   | titulo                     | character varying        |                      500 | NO          |                                       |                4
 documentos_cliente                   | descripcion                | text                     |                          | YES         |                                       |                5
 documentos_cliente                   | nombre_archivo             | character varying        |                      500 | NO          |                                       |                6
 documentos_cliente                   | nombre_original            | character varying        |                      500 | NO          |                                       |                7
 documentos_cliente                   | tamano_bytes               | bigint                   |                          | NO          |                                       |                8
 documentos_cliente                   | tipo_mime                  | character varying        |                      100 | NO          |                                       |                9
 documentos_cliente                   | url_storage                | text                     |                          | NO          |                                       |               10
 documentos_cliente                   | etiquetas                  | ARRAY                    |                          | YES         |                                       |               11
 documentos_cliente                   | version                    | integer                  |                          | NO          | 1                                     |               12
 documentos_cliente                   | es_version_actual          | boolean                  |                          | NO          | true                                  |               13
 documentos_cliente                   | documento_padre_id         | uuid                     |                          | YES         |                                       |               14
 documentos_cliente                   | estado                     | character varying        |                       50 | NO          | 'activo'::character varying           |               15
 documentos_cliente                   | metadata                   | jsonb                    |                          | YES         | '{}'::jsonb                           |               16
 documentos_cliente                   | subido_por                 | text                     |                          | NO          |                                       |               17
 documentos_cliente                   | fecha_documento            | timestamp with time zone |                          | YES         |                                       |               18
 documentos_cliente                   | fecha_vencimiento          | timestamp with time zone |                          | YES         |                                       |               19
 documentos_cliente                   | es_importante              | boolean                  |                          | YES         | false                                 |               20
 documentos_cliente                   | fecha_creacion             | timestamp with time zone |                          | YES         | CURRENT_TIMESTAMP                     |               21
 documentos_cliente                   | fecha_actualizacion        | timestamp with time zone |                          | YES         | CURRENT_TIMESTAMP                     |               22
 documentos_proyecto                  | id                         | uuid                     |                          | NO          | uuid_generate_v4()                    |                1
 documentos_proyecto                  | proyecto_id                | uuid                     |                          | NO          |                                       |                2
 documentos_proyecto                  | categoria_id               | uuid                     |                          | YES         |                                       |                3
 documentos_proyecto                  | titulo                     | character varying        |                      500 | NO          |                                       |                4
 documentos_proyecto                  | descripcion                | text                     |                          | YES         |                                       |                5
 documentos_proyecto                  | nombre_archivo             | character varying        |                      500 | NO          |                                       |                6
 documentos_proyecto                  | nombre_original            | character varying        |                      500 | NO          |                                       |                7
 documentos_proyecto                  | tamano_bytes               | bigint                   |                          | NO          |                                       |                8
 documentos_proyecto                  | tipo_mime                  | character varying        |                      100 | NO          |                                       |                9
 documentos_proyecto                  | url_storage                | text                     |                          | NO          |                                       |               10
 documentos_proyecto                  | etiquetas                  | ARRAY                    |                          | YES         |                                       |               11
 documentos_proyecto                  | version                    | integer                  |                          | NO          | 1                                     |               12
 documentos_proyecto                  | es_version_actual          | boolean                  |                          | NO          | true                                  |               13
 documentos_proyecto                  | documento_padre_id         | uuid                     |                          | YES         |                                       |               14
 documentos_proyecto                  | estado                     | character varying        |                       50 | NO          | 'activo'::character varying           |               15
 documentos_proyecto                  | metadata                   | jsonb                    |                          | YES         |                                       |               16
 documentos_proyecto                  | subido_por                 | character varying        |                      255 | NO          |                                       |               17
 documentos_proyecto                  | fecha_documento            | timestamp with time zone |                          | YES         |                                       |               18
 documentos_proyecto                  | fecha_vencimiento          | timestamp with time zone |                          | YES         |                                       |               19
 documentos_proyecto                  | es_importante              | boolean                  |                          | YES         | false                                 |               20
 documentos_proyecto                  | fecha_creacion             | timestamp with time zone |                          | YES         | now()                                 |               21
 documentos_proyecto                  | fecha_actualizacion        | timestamp with time zone |                          | YES         | now()                                 |               22
 fuentes_pago                         | id                         | uuid                     |                          | NO          | gen_random_uuid()                     |                1
 fuentes_pago                         | negociacion_id             | uuid                     |                          | NO          |                                       |                2
 fuentes_pago                         | tipo                       | character varying        |                       50 | NO          |                                       |                3
 fuentes_pago                         | monto_aprobado             | numeric                  |                          | NO          |                                       |                4
 fuentes_pago                         | monto_recibido             | numeric                  |                          | YES         | 0                                     |                5
 fuentes_pago                         | saldo_pendiente            | numeric                  |                          | YES         |                                       |                6
 fuentes_pago                         | porcentaje_completado      | numeric                  |                          | YES         |                                       |                7
 fuentes_pago                         | entidad                    | character varying        |                      100 | YES         |                                       |                8
 fuentes_pago                         | numero_referencia          | character varying        |                       50 | YES         |                                       |                9
 fuentes_pago                         | permite_multiples_abonos   | boolean                  |                          | NO          | false                                 |               10
 fuentes_pago                         | carta_aprobacion_url       | text                     |                          | YES         |                                       |               11
 fuentes_pago                         | carta_asignacion_url       | text                     |                          | YES         |                                       |               12
 fuentes_pago                         | estado                     | character varying        |                       20 | NO          | 'Pendiente'::character varying        |               13
 fuentes_pago                         | fecha_completado           | timestamp with time zone |                          | YES         |                                       |               14
 fuentes_pago                         | fecha_creacion             | timestamp with time zone |                          | NO          | now()                                 |               15
 fuentes_pago                         | fecha_actualizacion        | timestamp with time zone |                          | NO          | now()                                 |               16
 intereses_completos                  | id                         | uuid                     |                          | YES         |                                       |                1
 intereses_completos                  | cliente_id                 | uuid                     |                          | YES         |                                       |                2
 intereses_completos                  | proyecto_id                | uuid                     |                          | YES         |                                       |                3
 intereses_completos                  | vivienda_id                | uuid                     |                          | YES         |                                       |                4
 intereses_completos                  | notas                      | text                     |                          | YES         |                                       |                5
 intereses_completos                  | estado                     | character varying        |                       20 | YES         |                                       |                6
 intereses_completos                  | motivo_descarte            | text                     |                          | YES         |                                       |                7
 intereses_completos                  | fecha_interes              | timestamp with time zone |                          | YES         |                                       |                8
 intereses_completos                  | fecha_actualizacion        | timestamp with time zone |                          | YES         |                                       |                9
 intereses_completos                  | usuario_creacion           | uuid                     |                          | YES         |                                       |               10
 intereses_completos                  | valor_estimado             | numeric                  |                          | YES         |                                       |               11
 intereses_completos                  | origen                     | character varying        |                       50 | YES         |                                       |               12
 intereses_completos                  | prioridad                  | character varying        |                       20 | YES         |                                       |               13
 intereses_completos                  | fecha_ultimo_contacto      | timestamp with time zone |                          | YES         |                                       |               14
 intereses_completos                  | proximo_seguimiento        | timestamp with time zone |                          | YES         |                                       |               15
 intereses_completos                  | negociacion_id             | uuid                     |                          | YES         |                                       |               16
 intereses_completos                  | fecha_conversion           | timestamp with time zone |                          | YES         |                                       |               17
 intereses_completos                  | cliente_nombre             | character varying        |                      100 | YES         |                                       |               18
 intereses_completos                  | cliente_apellido           | character varying        |                      100 | YES         |                                       |               19
 intereses_completos                  | nombre_completo            | character varying        |                      200 | YES         |                                       |               20
 intereses_completos                  | cliente_email              | character varying        |                      100 | YES         |                                       |               21
 intereses_completos                  | cliente_telefono           | character varying        |                       20 | YES         |                                       |               22
 intereses_completos                  | cliente_documento          | character varying        |                       20 | YES         |                                       |               23
 intereses_completos                  | proyecto_nombre            | character varying        |                      255 | YES         |                                       |               24
 intereses_completos                  | proyecto_estado            | character varying        |                       50 | YES         |                                       |               25
 intereses_completos                  | vivienda_numero            | character varying        |                       10 | YES         |                                       |               26
 intereses_completos                  | vivienda_valor             | numeric                  |                          | YES         |                                       |               27
 intereses_completos                  | vivienda_estado            | character varying        |                       50 | YES         |                                       |               28
 intereses_completos                  | manzana_nombre             | character varying        |                       10 | YES         |                                       |               29
 intereses_completos                  | dias_desde_interes         | numeric                  |                          | YES         |                                       |               30
 intereses_completos                  | seguimiento_urgente        | boolean                  |                          | YES         |                                       |               31
 manzanas                             | id                         | uuid                     |                          | NO          | uuid_generate_v4()                    |                1
 manzanas                             | proyecto_id                | uuid                     |                          | NO          |                                       |                2
 manzanas                             | nombre                     | character varying        |                       10 | NO          |                                       |                3
 manzanas                             | numero_viviendas           | integer                  |                          | NO          |                                       |                4
 manzanas                             | fecha_creacion             | timestamp with time zone |                          | YES         | now()                                 |                5
 negociaciones                        | id                         | uuid                     |                          | NO          | gen_random_uuid()                     |                1
 negociaciones                        | cliente_id                 | uuid                     |                          | NO          |                                       |                2
 negociaciones                        | vivienda_id                | uuid                     |                          | NO          |                                       |                3
 negociaciones                        | estado                     | character varying        |                       30 | NO          | 'En Proceso'::character varying       |                4
 negociaciones                        | valor_negociado            | numeric                  |                          | NO          |                                       |                5
 negociaciones                        | descuento_aplicado         | numeric                  |                          | YES         | 0                                     |                6
 negociaciones                        | valor_total                | numeric                  |                          | YES         |                                       |                7
 negociaciones                        | total_fuentes_pago         | numeric                  |                          | YES         | 0                                     |                8
 negociaciones                        | total_abonado              | numeric                  |                          | YES         | 0                                     |                9
 negociaciones                        | saldo_pendiente            | numeric                  |                          | YES         | 0                                     |               10
 negociaciones                        | porcentaje_pagado          | numeric                  |                          | YES         | 0                                     |               11
 negociaciones                        | fecha_negociacion          | timestamp with time zone |                          | NO          | now()                                 |               12
 negociaciones                        | fecha_cierre_financiero    | timestamp with time zone |                          | YES         |                                       |               13
 negociaciones                        | fecha_activacion           | timestamp with time zone |                          | YES         |                                       |               14
 negociaciones                        | fecha_completada           | timestamp with time zone |                          | YES         |                                       |               15
 negociaciones                        | fecha_cancelacion          | timestamp with time zone |                          | YES         |                                       |               16
 negociaciones                        | motivo_cancelacion         | text                     |                          | YES         |                                       |               17
 negociaciones                        | promesa_compraventa_url    | text                     |                          | YES         |                                       |               18
 negociaciones                        | promesa_firmada_url        | text                     |                          | YES         |                                       |               19
 negociaciones                        | evidencia_envio_correo_url | text                     |                          | YES         |                                       |               20
 negociaciones                        | escritura_url              | text                     |                          | YES         |                                       |               21
 negociaciones                        | otros_documentos           | jsonb                    |                          | YES         |                                       |               22
 negociaciones                        | notas                      | text                     |                          | YES         |                                       |               23
 negociaciones                        | fecha_creacion             | timestamp with time zone |                          | NO          | now()                                 |               24
 negociaciones                        | fecha_actualizacion        | timestamp with time zone |                          | NO          | now()                                 |               25
 negociaciones                        | usuario_creacion           | uuid                     |                          | YES         |                                       |               26
 negociaciones                        | fecha_renuncia_efectiva    | timestamp with time zone |                          | YES         |                                       |               27
 plantillas_proceso                   | id                         | uuid                     |                          | NO          | gen_random_uuid()                     |                1
 plantillas_proceso                   | nombre                     | character varying        |                      200 | NO          |                                       |                2
 plantillas_proceso                   | descripcion                | text                     |                          | YES         |                                       |                3
 plantillas_proceso                   | pasos                      | jsonb                    |                          | NO          |                                       |                4
 plantillas_proceso                   | activo                     | boolean                  |                          | NO          | true                                  |                5
 plantillas_proceso                   | es_predeterminado          | boolean                  |                          | NO          | false                                 |                6
 plantillas_proceso                   | fecha_creacion             | timestamp with time zone |                          | NO          | now()                                 |                7
 plantillas_proceso                   | fecha_actualizacion        | timestamp with time zone |                          | NO          | now()                                 |                8
 plantillas_proceso                   | usuario_creacion           | uuid                     |                          | YES         |                                       |                9
 procesos_negociacion                 | id                         | uuid                     |                          | NO          | gen_random_uuid()                     |                1
 procesos_negociacion                 | negociacion_id             | uuid                     |                          | NO          |                                       |                2
 procesos_negociacion                 | nombre                     | character varying        |                      200 | NO          |                                       |                3
 procesos_negociacion                 | descripcion                | text                     |                          | YES         |                                       |                4
 procesos_negociacion                 | orden                      | integer                  |                          | NO          | 1                                     |                5
 procesos_negociacion                 | es_obligatorio             | boolean                  |                          | NO          | true                                  |                6
 procesos_negociacion                 | permite_omitir             | boolean                  |                          | NO          | false                                 |                7
 procesos_negociacion                 | estado                     | character varying        |                       20 | NO          | 'Pendiente'::character varying        |                8
 procesos_negociacion                 | depende_de                 | ARRAY                    |                          | YES         |                                       |                9
 procesos_negociacion                 | documentos_requeridos      | jsonb                    |                          | YES         |                                       |               10
 procesos_negociacion                 | documentos_urls            | jsonb                    |                          | YES         |                                       |               11
 procesos_negociacion                 | fecha_inicio               | timestamp with time zone |                          | YES         |                                       |               12
 procesos_negociacion                 | fecha_completado           | timestamp with time zone |                          | YES         |                                       |               13
 procesos_negociacion                 | fecha_limite               | timestamp with time zone |                          | YES         |                                       |               14
 procesos_negociacion                 | notas                      | text                     |                          | YES         |                                       |               15
 procesos_negociacion                 | motivo_omision             | text                     |                          | YES         |                                       |               16
 procesos_negociacion                 | fecha_creacion             | timestamp with time zone |                          | NO          | now()                                 |               17
 procesos_negociacion                 | fecha_actualizacion        | timestamp with time zone |                          | NO          | now()                                 |               18
 procesos_negociacion                 | usuario_completo           | uuid                     |                          | YES         |                                       |               19
 proyectos                            | id                         | uuid                     |                          | NO          | uuid_generate_v4()                    |                1
 proyectos                            | nombre                     | character varying        |                      255 | NO          |                                       |                2
 proyectos                            | descripcion                | text                     |                          | NO          |                                       |                3
 proyectos                            | ubicacion                  | character varying        |                      500 | NO          |                                       |                4
 proyectos                            | fecha_inicio               | timestamp with time zone |                          | NO          |                                       |                5
 proyectos                            | fecha_fin_estimada         | timestamp with time zone |                          | NO          |                                       |                6
 proyectos                            | presupuesto                | numeric                  |                          | NO          | 0                                     |                7
 proyectos                            | estado                     | character varying        |                       50 | NO          | 'en_planificacion'::character varying |                8
 proyectos                            | progreso                   | integer                  |                          | NO          | 0                                     |                9
 proyectos                            | responsable                | character varying        |                      255 | NO          |                                       |               10
 proyectos                            | telefono                   | character varying        |                       50 | NO          |                                       |               11
 proyectos                            | email                      | character varying        |                      255 | NO          |                                       |               12
 proyectos                            | fecha_creacion             | timestamp with time zone |                          | YES         | now()                                 |               13
 proyectos                            | fecha_actualizacion        | timestamp with time zone |                          | YES         | now()                                 |               14
 proyectos                            | user_id                    | uuid                     |                          | YES         |                                       |               15
 renuncias                            | id                         | uuid                     |                          | NO          | uuid_generate_v4()                    |                1
 renuncias                            | vivienda_id                | uuid                     |                          | NO          |                                       |                2
 renuncias                            | cliente_id                 | uuid                     |                          | NO          |                                       |                3
 renuncias                            | motivo                     | text                     |                          | NO          |                                       |                4
 renuncias                            | fecha_renuncia             | timestamp with time zone |                          | NO          |                                       |                5
 renuncias                            | monto_a_devolver           | numeric                  |                          | NO          | 0                                     |                6
 renuncias                            | estado                     | character varying        |                       50 | NO          | 'pendiente'::character varying        |                7
 renuncias                            | fecha_creacion             | timestamp with time zone |                          | YES         | now()                                 |                8
 renuncias                            | fecha_actualizacion        | timestamp with time zone |                          | YES         | now()                                 |                9
 renuncias                            | negociacion_id             | uuid                     |                          | YES         |                                       |               10
 renuncias                            | vivienda_valor_snapshot    | numeric                  |                          | YES         |                                       |               11
 renuncias                            | abonos_snapshot            | jsonb                    |                          | YES         |                                       |               12
 renuncias                            | requiere_devolucion        | boolean                  |                          | NO          | false                                 |               13
 renuncias                            | fecha_devolucion           | timestamp with time zone |                          | YES         |                                       |               14
 renuncias                            | comprobante_devolucion_url | text                     |                          | YES         |                                       |               15
 renuncias                            | metodo_devolucion          | character varying        |                       50 | YES         |                                       |               16
 renuncias                            | numero_comprobante         | character varying        |                      100 | YES         |                                       |               17
 renuncias                            | fecha_cancelacion          | timestamp with time zone |                          | YES         |                                       |               18
 renuncias                            | motivo_cancelacion         | text                     |                          | YES         |                                       |               19
 renuncias                            | usuario_cancelacion        | uuid                     |                          | YES         |                                       |               20
 renuncias                            | fecha_cierre               | timestamp with time zone |                          | YES         |                                       |               21
 renuncias                            | usuario_registro           | uuid                     |                          | YES         |                                       |               22
 renuncias                            | usuario_cierre             | uuid                     |                          | YES         |                                       |               23
 v_negociaciones_completas            | id                         | uuid                     |                          | YES         |                                       |                1
 v_negociaciones_completas            | estado_negociacion         | character varying        |                       30 | YES         |                                       |                2
 v_negociaciones_completas            | fecha_creacion             | timestamp with time zone |                          | YES         |                                       |                3
 v_negociaciones_completas            | valor_total                | numeric                  |                          | YES         |                                       |                4
 v_negociaciones_completas            | saldo_pendiente            | numeric                  |                          | YES         |                                       |                5
 v_negociaciones_completas            | fecha_completada           | timestamp with time zone |                          | YES         |                                       |                6
 v_negociaciones_completas            | fecha_renuncia_efectiva    | timestamp with time zone |                          | YES         |                                       |                7
 v_negociaciones_completas            | cliente_id                 | uuid                     |                          | YES         |                                       |                8
 v_negociaciones_completas            | cliente_nombre             | character varying        |                      200 | YES         |                                       |                9
 v_negociaciones_completas            | cliente_documento          | character varying        |                       20 | YES         |                                       |               10
 v_negociaciones_completas            | estado_cliente             | character varying        |                       20 | YES         |                                       |               11
 v_negociaciones_completas            | vivienda_id                | uuid                     |                          | YES         |                                       |               12
 v_negociaciones_completas            | vivienda_numero            | character varying        |                       10 | YES         |                                       |               13
 v_negociaciones_completas            | estado_vivienda            | character varying        |                       50 | YES         |                                       |               14
 v_negociaciones_completas            | vivienda_valor             | numeric                  |                          | YES         |                                       |               15
 v_negociaciones_completas            | fecha_entrega              | timestamp with time zone |                          | YES         |                                       |               16
 v_negociaciones_completas            | proyecto_id                | uuid                     |                          | YES         |                                       |               17
 v_negociaciones_completas            | proyecto_nombre            | character varying        |                      255 | YES         |                                       |               18
 v_negociaciones_completas            | renuncia_id                | uuid                     |                          | YES         |                                       |               19
 v_negociaciones_completas            | estado_renuncia            | character varying        |                       50 | YES         |                                       |               20
 v_negociaciones_completas            | fecha_renuncia             | timestamp with time zone |                          | YES         |                                       |               21
 v_negociaciones_completas            | requiere_devolucion        | boolean                  |                          | YES         |                                       |               22
 v_negociaciones_completas            | monto_a_devolver           | numeric                  |                          | YES         |                                       |               23
 v_renuncias_pendientes               | id                         | uuid                     |                          | YES         |                                       |                1
 v_renuncias_pendientes               | fecha_renuncia             | timestamp with time zone |                          | YES         |                                       |                2
 v_renuncias_pendientes               | motivo                     | text                     |                          | YES         |                                       |                3
 v_renuncias_pendientes               | monto_a_devolver           | numeric                  |                          | YES         |                                       |                4
 v_renuncias_pendientes               | cliente_id                 | uuid                     |                          | YES         |                                       |                5
 v_renuncias_pendientes               | cliente_nombre             | character varying        |                      200 | YES         |                                       |                6
 v_renuncias_pendientes               | cliente_documento          | character varying        |                       20 | YES         |                                       |                7
 v_renuncias_pendientes               | cliente_telefono           | character varying        |                       20 | YES         |                                       |                8
 v_renuncias_pendientes               | vivienda_numero            | character varying        |                       10 | YES         |                                       |                9
 v_renuncias_pendientes               | proyecto_nombre            | character varying        |                      255 | YES         |                                       |               10
 v_renuncias_pendientes               | negociacion_valor_total    | numeric                  |                          | YES         |                                       |               11
 v_renuncias_pendientes               | dias_pendiente             | integer                  |                          | YES         |                                       |               12
 vista_clientes_resumen               | id                         | uuid                     |                          | YES         |                                       |                1
 vista_clientes_resumen               | nombre_completo            | character varying        |                      200 | YES         |                                       |                2
 vista_clientes_resumen               | tipo_documento             | character varying        |                       10 | YES         |                                       |                3
 vista_clientes_resumen               | numero_documento           | character varying        |                       20 | YES         |                                       |                4
 vista_clientes_resumen               | telefono                   | character varying        |                       20 | YES         |                                       |                5
 vista_clientes_resumen               | email                      | character varying        |                      100 | YES         |                                       |                6
 vista_clientes_resumen               | estado                     | character varying        |                       20 | YES         |                                       |                7
 vista_clientes_resumen               | origen                     | character varying        |                       50 | YES         |                                       |                8
 vista_clientes_resumen               | fecha_creacion             | timestamp with time zone |                          | YES         |                                       |                9
 vista_clientes_resumen               | total_negociaciones        | bigint                   |                          | YES         |                                       |               10
 vista_clientes_resumen               | negociaciones_activas      | bigint                   |                          | YES         |                                       |               11
 vista_clientes_resumen               | negociaciones_completadas  | bigint                   |                          | YES         |                                       |               12
 vista_clientes_resumen               | ultima_negociacion         | timestamp with time zone |                          | YES         |                                       |               13
 vista_manzanas_disponibilidad        | id                         | uuid                     |                          | YES         |                                       |                1
 vista_manzanas_disponibilidad        | proyecto_id                | uuid                     |                          | YES         |                                       |                2
 vista_manzanas_disponibilidad        | nombre                     | character varying        |                       10 | YES         |                                       |                3
 vista_manzanas_disponibilidad        | total_viviendas            | integer                  |                          | YES         |                                       |                4
 vista_manzanas_disponibilidad        | viviendas_creadas          | bigint                   |                          | YES         |                                       |                5
 vista_manzanas_disponibilidad        | viviendas_disponibles      | bigint                   |                          | YES         |                                       |                6
 vista_manzanas_disponibilidad        | tiene_disponibles          | boolean                  |                          | YES         |                                       |                7
 vista_negociaciones_completas        | id                         | uuid                     |                          | YES         |                                       |                1
 vista_negociaciones_completas        | estado                     | character varying        |                       30 | YES         |                                       |                2
 vista_negociaciones_completas        | valor_total                | numeric                  |                          | YES         |                                       |                3
 vista_negociaciones_completas        | total_fuentes_pago         | numeric                  |                          | YES         |                                       |                4
 vista_negociaciones_completas        | total_abonado              | numeric                  |                          | YES         |                                       |                5
 vista_negociaciones_completas        | saldo_pendiente            | numeric                  |                          | YES         |                                       |                6
 vista_negociaciones_completas        | porcentaje_pagado          | numeric                  |                          | YES         |                                       |                7
 vista_negociaciones_completas        | fecha_negociacion          | timestamp with time zone |                          | YES         |                                       |                8
 vista_negociaciones_completas        | fecha_cierre_financiero    | timestamp with time zone |                          | YES         |                                       |                9
 vista_negociaciones_completas        | cliente_id                 | uuid                     |                          | YES         |                                       |               10
 vista_negociaciones_completas        | cliente_nombre             | character varying        |                      200 | YES         |                                       |               11
 vista_negociaciones_completas        | cliente_documento          | character varying        |                       20 | YES         |                                       |               12
 vista_negociaciones_completas        | cliente_telefono           | character varying        |                       20 | YES         |                                       |               13
 vista_negociaciones_completas        | cliente_email              | character varying        |                      100 | YES         |                                       |               14
 vista_negociaciones_completas        | vivienda_id                | uuid                     |                          | YES         |                                       |               15
 vista_negociaciones_completas        | vivienda_numero            | character varying        |                       10 | YES         |                                       |               16
 vista_negociaciones_completas        | tipo_vivienda              | character varying        |                       20 | YES         |                                       |               17
 vista_negociaciones_completas        | vivienda_valor_original    | numeric                  |                          | YES         |                                       |               18
 vista_negociaciones_completas        | manzana_nombre             | character varying        |                       10 | YES         |                                       |               19
 vista_negociaciones_completas        | proyecto_nombre            | character varying        |                      255 | YES         |                                       |               20
 vista_viviendas_abonos               | id                         | uuid                     |                          | YES         |                                       |                1
 vista_viviendas_abonos               | numero                     | character varying        |                       10 | YES         |                                       |                2
 vista_viviendas_abonos               | manzana_id                 | uuid                     |                          | YES         |                                       |                3
 vista_viviendas_abonos               | estado                     | character varying        |                       50 | YES         |                                       |                4
 vista_viviendas_abonos               | cliente_id                 | uuid                     |                          | YES         |                                       |                5
 vista_viviendas_abonos               | valor_total                | numeric                  |                          | YES         |                                       |                6
 vista_viviendas_abonos               | fecha_asignacion           | timestamp with time zone |                          | YES         |                                       |                7
 vista_viviendas_abonos               | fecha_pago_completo        | timestamp with time zone |                          | YES         |                                       |                8
 vista_viviendas_abonos               | total_abonado              | numeric                  |                          | YES         |                                       |                9
 vista_viviendas_abonos               | saldo_pendiente            | numeric                  |                          | YES         |                                       |               10
 vista_viviendas_abonos               | porcentaje_pagado          | numeric                  |                          | YES         |                                       |               11
 vista_viviendas_abonos               | cantidad_abonos            | bigint                   |                          | YES         |                                       |               12
 viviendas                            | id                         | uuid                     |                          | NO          | uuid_generate_v4()                    |                1
 viviendas                            | manzana_id                 | uuid                     |                          | NO          |                                       |                2
 viviendas                            | numero                     | character varying        |                       10 | NO          |                                       |                3
 viviendas                            | estado                     | character varying        |                       50 | NO          | 'disponible'::character varying       |                4
 viviendas                            | precio                     | numeric                  |                          | NO          |                                       |                5
 viviendas                            | area                       | numeric                  |                          | NO          |                                       |                6
 viviendas                            | cliente_id                 | uuid                     |                          | YES         |                                       |                7
 viviendas                            | fecha_creacion             | timestamp with time zone |                          | YES         | now()                                 |                8
 viviendas                            | fecha_actualizacion        | timestamp with time zone |                          | YES         | now()                                 |                9
 viviendas                            | lindero_norte              | text                     |                          | YES         |                                       |               10
 viviendas                            | lindero_sur                | text                     |                          | YES         |                                       |               11
 viviendas                            | lindero_oriente            | text                     |                          | YES         |                                       |               12
 viviendas                            | lindero_occidente          | text                     |                          | YES         |                                       |               13
 viviendas                            | matricula_inmobiliaria     | character varying        |                      100 | YES         |                                       |               14
 viviendas                            | nomenclatura               | character varying        |                      100 | YES         |                                       |               15
 viviendas                            | area_lote                  | numeric                  |                          | YES         |                                       |               16
 viviendas                            | area_construida            | numeric                  |                          | YES         |                                       |               17
 viviendas                            | tipo_vivienda              | character varying        |                       20 | YES         |                                       |               18
 viviendas                            | certificado_tradicion_url  | text                     |                          | YES         |                                       |               19
 viviendas                            | valor_base                 | numeric                  |                          | NO          | 0                                     |               20
 viviendas                            | es_esquinera               | boolean                  |                          | YES         | false                                 |               21
 viviendas                            | recargo_esquinera          | numeric                  |                          | YES         | 0                                     |               22
 viviendas                            | gastos_notariales          | numeric                  |                          | YES         | 5000000                               |               23
 viviendas                            | valor_total                | numeric                  |                          | YES         |                                       |               24
 viviendas                            | fecha_asignacion           | timestamp with time zone |                          | YES         |                                       |               25
 viviendas                            | fecha_pago_completo        | timestamp with time zone |                          | YES         |                                       |               26
 viviendas                            | negociacion_id             | uuid                     |                          | YES         |                                       |               27
 viviendas                            | fecha_entrega              | timestamp with time zone |                          | YES         |                                       |               28
(399 rows)


========================================

­ƒöæ CONSTRAINTS DE TODAS LAS TABLAS

       table_name       |               constraint_name               | constraint_type |     column_name     |   foreign_table_name   |   foreign_column_name   |                                                                                                                                                                            check_clause                                                                                                                                                                             
------------------------+---------------------------------------------+-----------------+---------------------+------------------------+-------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 abonos                 | 2200_17526_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 abonos                 | 2200_17526_2_not_null                       | CHECK           |                     |                        |                         | vivienda_id IS NOT NULL
 abonos                 | 2200_17526_3_not_null                       | CHECK           |                     |                        |                         | cliente_id IS NOT NULL
 abonos                 | 2200_17526_4_not_null                       | CHECK           |                     |                        |                         | monto IS NOT NULL
 abonos                 | 2200_17526_5_not_null                       | CHECK           |                     |                        |                         | fecha_abono IS NOT NULL
 abonos                 | 2200_17526_6_not_null                       | CHECK           |                     |                        |                         | metodo_pago IS NOT NULL
 abonos                 | abonos_monto_check                          | CHECK           |                     | abonos                 | monto                   | (monto > (0)::numeric)
 abonos                 | abonos_vivienda_id_fkey                     | FOREIGN KEY     | vivienda_id         | viviendas              | id                      | 
 abonos                 | abonos_pkey                                 | PRIMARY KEY     | id                  | abonos                 | id                      | 
 abonos_historial       | 2200_25826_10_not_null                      | CHECK           |                     |                        |                         | fecha_creacion IS NOT NULL
 abonos_historial       | 2200_25826_11_not_null                      | CHECK           |                     |                        |                         | fecha_actualizacion IS NOT NULL
 abonos_historial       | 2200_25826_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 abonos_historial       | 2200_25826_2_not_null                       | CHECK           |                     |                        |                         | negociacion_id IS NOT NULL
 abonos_historial       | 2200_25826_3_not_null                       | CHECK           |                     |                        |                         | fuente_pago_id IS NOT NULL
 abonos_historial       | 2200_25826_4_not_null                       | CHECK           |                     |                        |                         | monto IS NOT NULL
 abonos_historial       | 2200_25826_5_not_null                       | CHECK           |                     |                        |                         | fecha_abono IS NOT NULL
 abonos_historial       | 2200_25826_6_not_null                       | CHECK           |                     |                        |                         | metodo_pago IS NOT NULL
 abonos_historial       | abonos_historial_metodo_pago_check          | CHECK           |                     | abonos_historial       | metodo_pago             | ((metodo_pago)::text = ANY ((ARRAY['Transferencia'::character varying, 'Efectivo'::character varying, 'Cheque'::character varying, 'Consignaci├│n'::character varying, 'PSE'::character varying, 'Tarjeta de Cr├®dito'::character varying, 'Tarjeta de D├®bito'::character varying])::text[]))
 abonos_historial       | abonos_historial_monto_check                | CHECK           |                     | abonos_historial       | monto                   | (monto > (0)::numeric)
 abonos_historial       | abonos_historial_fuente_pago_id_fkey        | FOREIGN KEY     | fuente_pago_id      | fuentes_pago           | id                      | 
 abonos_historial       | abonos_historial_negociacion_id_fkey        | FOREIGN KEY     | negociacion_id      | negociaciones          | id                      | 
 abonos_historial       | abonos_historial_usuario_registro_fkey      | FOREIGN KEY     | usuario_registro    |                        |                         | 
 abonos_historial       | abonos_historial_pkey                       | PRIMARY KEY     | id                  | abonos_historial       | id                      | 
 audit_log_seguridad    | 2200_20990_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 audit_log_seguridad    | 2200_20990_2_not_null                       | CHECK           |                     |                        |                         | tipo IS NOT NULL
 audit_log_seguridad    | 2200_20990_3_not_null                       | CHECK           |                     |                        |                         | usuario_email IS NOT NULL
 audit_log_seguridad    | audit_log_seguridad_tipo_check              | CHECK           |                     | audit_log_seguridad    | tipo                    | ((tipo)::text = ANY ((ARRAY['login_exitoso'::character varying, 'login_fallido'::character varying, 'logout'::character varying, 'password_reset_solicitado'::character varying, 'password_reset_completado'::character varying, 'session_expirada'::character varying, 'cuenta_bloqueada'::character varying, 'cuenta_desbloqueada'::character varying])::text[]))
 audit_log_seguridad    | audit_log_seguridad_usuario_id_fkey         | FOREIGN KEY     | usuario_id          |                        |                         | 
 audit_log_seguridad    | audit_log_seguridad_pkey                    | PRIMARY KEY     | id                  | audit_log_seguridad    | id                      | 
 categorias_documento   | 2200_17638_10_not_null                      | CHECK           |                     |                        |                         | es_global IS NOT NULL
 categorias_documento   | 2200_17638_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 categorias_documento   | 2200_17638_2_not_null                       | CHECK           |                     |                        |                         | user_id IS NOT NULL
 categorias_documento   | 2200_17638_3_not_null                       | CHECK           |                     |                        |                         | nombre IS NOT NULL
 categorias_documento   | 2200_17638_9_not_null                       | CHECK           |                     |                        |                         | modulos_permitidos IS NOT NULL
 categorias_documento   | check_modulos_permitidos_no_vacio           | CHECK           |                     | categorias_documento   | es_global               | ((array_length(modulos_permitidos, 1) > 0) OR (es_global = true))
 categorias_documento   | check_modulos_permitidos_no_vacio           | CHECK           |                     | categorias_documento   | modulos_permitidos      | ((array_length(modulos_permitidos, 1) > 0) OR (es_global = true))
 categorias_documento   | categorias_documento_user_id_fkey           | FOREIGN KEY     | user_id             |                        |                         | 
 categorias_documento   | categorias_documento_pkey                   | PRIMARY KEY     | id                  | categorias_documento   | id                      | 
 categorias_documento   | categorias_documento_user_id_nombre_key     | UNIQUE          | user_id             | categorias_documento   | nombre                  | 
 categorias_documento   | categorias_documento_user_id_nombre_key     | UNIQUE          | nombre              | categorias_documento   | user_id                 | 
 categorias_documento   | categorias_documento_user_id_nombre_key     | UNIQUE          | nombre              | categorias_documento   | nombre                  | 
 categorias_documento   | categorias_documento_user_id_nombre_key     | UNIQUE          | user_id             | categorias_documento   | user_id                 | 
 cliente_intereses      | 2200_20842_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 cliente_intereses      | 2200_20842_2_not_null                       | CHECK           |                     |                        |                         | cliente_id IS NOT NULL
 cliente_intereses      | 2200_20842_3_not_null                       | CHECK           |                     |                        |                         | proyecto_id IS NOT NULL
 cliente_intereses      | 2200_20842_6_not_null                       | CHECK           |                     |                        |                         | estado IS NOT NULL
 cliente_intereses      | 2200_20842_8_not_null                       | CHECK           |                     |                        |                         | fecha_interes IS NOT NULL
 cliente_intereses      | 2200_20842_9_not_null                       | CHECK           |                     |                        |                         | fecha_actualizacion IS NOT NULL
 cliente_intereses      | cliente_intereses_estado_check              | CHECK           |                     | cliente_intereses      | estado                  | ((estado)::text = ANY ((ARRAY['Activo'::character varying, 'Pendiente'::character varying, 'Contactado'::character varying, 'En Seguimiento'::character varying, 'Negociaci├│n'::character varying, 'Descartado'::character varying, 'Perdido'::character varying])::text[]))
 cliente_intereses      | cliente_intereses_origen_check              | CHECK           |                     | cliente_intereses      | origen                  | ((origen)::text = ANY ((ARRAY['Visita Presencial'::character varying, 'Llamada Telef├│nica'::character varying, 'WhatsApp'::character varying, 'Email'::character varying, 'Redes Sociales'::character varying, 'Referido'::character varying, 'Sitio Web'::character varying, 'Otro'::character varying])::text[]))
 cliente_intereses      | cliente_intereses_prioridad_check           | CHECK           |                     | cliente_intereses      | prioridad               | ((prioridad)::text = ANY ((ARRAY['Alta'::character varying, 'Media'::character varying, 'Baja'::character varying])::text[]))
 cliente_intereses      | cliente_intereses_cliente_id_fkey           | FOREIGN KEY     | cliente_id          | clientes               | id                      | 
 cliente_intereses      | cliente_intereses_negociacion_id_fkey       | FOREIGN KEY     | negociacion_id      | negociaciones          | id                      | 
 cliente_intereses      | cliente_intereses_proyecto_id_fkey          | FOREIGN KEY     | proyecto_id         | proyectos              | id                      | 
 cliente_intereses      | cliente_intereses_usuario_creacion_fkey     | FOREIGN KEY     | usuario_creacion    |                        |                         | 
 cliente_intereses      | cliente_intereses_vivienda_id_fkey          | FOREIGN KEY     | vivienda_id         | viviendas              | id                      | 
 cliente_intereses      | cliente_intereses_pkey                      | PRIMARY KEY     | id                  | cliente_intereses      | id                      | 
 cliente_intereses      | interes_unico                               | UNIQUE          | estado              | cliente_intereses      | proyecto_id             | 
 cliente_intereses      | interes_unico                               | UNIQUE          | cliente_id          | cliente_intereses      | cliente_id              | 
 cliente_intereses      | interes_unico                               | UNIQUE          | cliente_id          | cliente_intereses      | estado                  | 
 cliente_intereses      | interes_unico                               | UNIQUE          | cliente_id          | cliente_intereses      | proyecto_id             | 
 cliente_intereses      | interes_unico                               | UNIQUE          | cliente_id          | cliente_intereses      | vivienda_id             | 
 cliente_intereses      | interes_unico                               | UNIQUE          | proyecto_id         | cliente_intereses      | cliente_id              | 
 cliente_intereses      | interes_unico                               | UNIQUE          | proyecto_id         | cliente_intereses      | estado                  | 
 cliente_intereses      | interes_unico                               | UNIQUE          | proyecto_id         | cliente_intereses      | proyecto_id             | 
 cliente_intereses      | interes_unico                               | UNIQUE          | proyecto_id         | cliente_intereses      | vivienda_id             | 
 cliente_intereses      | interes_unico                               | UNIQUE          | vivienda_id         | cliente_intereses      | cliente_id              | 
 cliente_intereses      | interes_unico                               | UNIQUE          | vivienda_id         | cliente_intereses      | estado                  | 
 cliente_intereses      | interes_unico                               | UNIQUE          | vivienda_id         | cliente_intereses      | proyecto_id             | 
 cliente_intereses      | interes_unico                               | UNIQUE          | vivienda_id         | cliente_intereses      | vivienda_id             | 
 cliente_intereses      | interes_unico                               | UNIQUE          | estado              | cliente_intereses      | cliente_id              | 
 cliente_intereses      | interes_unico                               | UNIQUE          | estado              | cliente_intereses      | estado                  | 
 cliente_intereses      | interes_unico                               | UNIQUE          | estado              | cliente_intereses      | vivienda_id             | 
 clientes               | 2200_20532_14_not_null                      | CHECK           |                     |                        |                         | estado IS NOT NULL
 clientes               | 2200_20532_19_not_null                      | CHECK           |                     |                        |                         | fecha_creacion IS NOT NULL
 clientes               | 2200_20532_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 clientes               | 2200_20532_20_not_null                      | CHECK           |                     |                        |                         | fecha_actualizacion IS NOT NULL
 clientes               | 2200_20532_2_not_null                       | CHECK           |                     |                        |                         | nombres IS NOT NULL
 clientes               | 2200_20532_3_not_null                       | CHECK           |                     |                        |                         | apellidos IS NOT NULL
 clientes               | 2200_20532_5_not_null                       | CHECK           |                     |                        |                         | tipo_documento IS NOT NULL
 clientes               | 2200_20532_6_not_null                       | CHECK           |                     |                        |                         | numero_documento IS NOT NULL
 clientes               | clientes_estado_check                       | CHECK           |                     | clientes               | estado                  | ((estado)::text = ANY (ARRAY[('Interesado'::character varying)::text, ('Activo'::character varying)::text, ('En Proceso de Renuncia'::character varying)::text, ('Inactivo'::character varying)::text, ('Propietario'::character varying)::text]))
 clientes               | clientes_origen_check                       | CHECK           |                     | clientes               | origen                  | ((origen)::text = ANY ((ARRAY['Referido'::character varying, 'P├ígina Web'::character varying, 'Redes Sociales'::character varying, 'Llamada Directa'::character varying, 'Visita Oficina'::character varying, 'Feria/Evento'::character varying, 'Publicidad'::character varying, 'Otro'::character varying])::text[]))
 clientes               | clientes_tipo_documento_check               | CHECK           |                     | clientes               | tipo_documento          | ((tipo_documento)::text = ANY ((ARRAY['CC'::character varying, 'CE'::character varying, 'TI'::character varying, 'NIT'::character varying, 'PP'::character varying, 'PEP'::character varying])::text[]))
 clientes               | clientes_usuario_creacion_fkey              | FOREIGN KEY     | usuario_creacion    |                        |                         | 
 clientes               | clientes_pkey                               | PRIMARY KEY     | id                  | clientes               | id                      | 
 clientes               | clientes_documento_unico                    | UNIQUE          | tipo_documento      | clientes               | tipo_documento          | 
 clientes               | clientes_documento_unico                    | UNIQUE          | tipo_documento      | clientes               | numero_documento        | 
 clientes               | clientes_documento_unico                    | UNIQUE          | numero_documento    | clientes               | tipo_documento          | 
 clientes               | clientes_documento_unico                    | UNIQUE          | numero_documento    | clientes               | numero_documento        | 
 configuracion_recargos | 2200_18947_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 configuracion_recargos | 2200_18947_2_not_null                       | CHECK           |                     |                        |                         | tipo IS NOT NULL
 configuracion_recargos | 2200_18947_3_not_null                       | CHECK           |                     |                        |                         | nombre IS NOT NULL
 configuracion_recargos | 2200_18947_4_not_null                       | CHECK           |                     |                        |                         | valor IS NOT NULL
 configuracion_recargos | configuracion_recargos_pkey                 | PRIMARY KEY     | id                  | configuracion_recargos | id                      | 
 configuracion_recargos | configuracion_recargos_tipo_key             | UNIQUE          | tipo                | configuracion_recargos | tipo                    | 
 documentos_cliente     | 2200_20914_10_not_null                      | CHECK           |                     |                        |                         | url_storage IS NOT NULL
 documentos_cliente     | 2200_20914_12_not_null                      | CHECK           |                     |                        |                         | version IS NOT NULL
 documentos_cliente     | 2200_20914_13_not_null                      | CHECK           |                     |                        |                         | es_version_actual IS NOT NULL
 documentos_cliente     | 2200_20914_15_not_null                      | CHECK           |                     |                        |                         | estado IS NOT NULL
 documentos_cliente     | 2200_20914_17_not_null                      | CHECK           |                     |                        |                         | subido_por IS NOT NULL
 documentos_cliente     | 2200_20914_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 documentos_cliente     | 2200_20914_2_not_null                       | CHECK           |                     |                        |                         | cliente_id IS NOT NULL
 documentos_cliente     | 2200_20914_4_not_null                       | CHECK           |                     |                        |                         | titulo IS NOT NULL
 documentos_cliente     | 2200_20914_6_not_null                       | CHECK           |                     |                        |                         | nombre_archivo IS NOT NULL
 documentos_cliente     | 2200_20914_7_not_null                       | CHECK           |                     |                        |                         | nombre_original IS NOT NULL
 documentos_cliente     | 2200_20914_8_not_null                       | CHECK           |                     |                        |                         | tamano_bytes IS NOT NULL
 documentos_cliente     | 2200_20914_9_not_null                       | CHECK           |                     |                        |                         | tipo_mime IS NOT NULL
 documentos_cliente     | documentos_cliente_categoria_id_fkey        | FOREIGN KEY     | categoria_id        | categorias_documento   | id                      | 
 documentos_cliente     | documentos_cliente_cliente_id_fkey          | FOREIGN KEY     | cliente_id          | clientes               | id                      | 
 documentos_cliente     | documentos_cliente_documento_padre_id_fkey  | FOREIGN KEY     | documento_padre_id  | documentos_cliente     | id                      | 
 documentos_cliente     | documentos_cliente_pkey                     | PRIMARY KEY     | id                  | documentos_cliente     | id                      | 
 documentos_proyecto    | 2200_17658_10_not_null                      | CHECK           |                     |                        |                         | url_storage IS NOT NULL
 documentos_proyecto    | 2200_17658_12_not_null                      | CHECK           |                     |                        |                         | version IS NOT NULL
 documentos_proyecto    | 2200_17658_13_not_null                      | CHECK           |                     |                        |                         | es_version_actual IS NOT NULL
 documentos_proyecto    | 2200_17658_15_not_null                      | CHECK           |                     |                        |                         | estado IS NOT NULL
 documentos_proyecto    | 2200_17658_17_not_null                      | CHECK           |                     |                        |                         | subido_por IS NOT NULL
 documentos_proyecto    | 2200_17658_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 documentos_proyecto    | 2200_17658_2_not_null                       | CHECK           |                     |                        |                         | proyecto_id IS NOT NULL
 documentos_proyecto    | 2200_17658_4_not_null                       | CHECK           |                     |                        |                         | titulo IS NOT NULL
 documentos_proyecto    | 2200_17658_6_not_null                       | CHECK           |                     |                        |                         | nombre_archivo IS NOT NULL
 documentos_proyecto    | 2200_17658_7_not_null                       | CHECK           |                     |                        |                         | nombre_original IS NOT NULL
 documentos_proyecto    | 2200_17658_8_not_null                       | CHECK           |                     |                        |                         | tamano_bytes IS NOT NULL
 documentos_proyecto    | 2200_17658_9_not_null                       | CHECK           |                     |                        |                         | tipo_mime IS NOT NULL
 documentos_proyecto    | documentos_proyecto_estado_check            | CHECK           |                     | documentos_proyecto    | estado                  | ((estado)::text = ANY ((ARRAY['activo'::character varying, 'archivado'::character varying, 'eliminado'::character varying])::text[]))
 documentos_proyecto    | documentos_proyecto_categoria_id_fkey       | FOREIGN KEY     | categoria_id        | categorias_documento   | id                      | 
 documentos_proyecto    | documentos_proyecto_documento_padre_id_fkey | FOREIGN KEY     | documento_padre_id  | documentos_proyecto    | id                      | 
 documentos_proyecto    | documentos_proyecto_proyecto_id_fkey        | FOREIGN KEY     | proyecto_id         | proyectos              | id                      | 
 documentos_proyecto    | documentos_proyecto_pkey                    | PRIMARY KEY     | id                  | documentos_proyecto    | id                      | 
 fuentes_pago           | 2200_20646_10_not_null                      | CHECK           |                     |                        |                         | permite_multiples_abonos IS NOT NULL
 fuentes_pago           | 2200_20646_13_not_null                      | CHECK           |                     |                        |                         | estado IS NOT NULL
 fuentes_pago           | 2200_20646_15_not_null                      | CHECK           |                     |                        |                         | fecha_creacion IS NOT NULL
 fuentes_pago           | 2200_20646_16_not_null                      | CHECK           |                     |                        |                         | fecha_actualizacion IS NOT NULL
 fuentes_pago           | 2200_20646_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 fuentes_pago           | 2200_20646_2_not_null                       | CHECK           |                     |                        |                         | negociacion_id IS NOT NULL
 fuentes_pago           | 2200_20646_3_not_null                       | CHECK           |                     |                        |                         | tipo IS NOT NULL
 fuentes_pago           | 2200_20646_4_not_null                       | CHECK           |                     |                        |                         | monto_aprobado IS NOT NULL
 fuentes_pago           | fuentes_pago_estado_check                   | CHECK           |                     | fuentes_pago           | estado                  | ((estado)::text = ANY ((ARRAY['Pendiente'::character varying, 'En Proceso'::character varying, 'Completada'::character varying])::text[]))
 fuentes_pago           | fuentes_pago_monto_positivo                 | CHECK           |                     | fuentes_pago           | monto_aprobado          | (monto_aprobado > (0)::numeric)
 fuentes_pago           | fuentes_pago_recibido_valido                | CHECK           |                     | fuentes_pago           | monto_recibido          | ((monto_recibido >= (0)::numeric) AND (monto_recibido <= monto_aprobado))
 fuentes_pago           | fuentes_pago_recibido_valido                | CHECK           |                     | fuentes_pago           | monto_aprobado          | ((monto_recibido >= (0)::numeric) AND (monto_recibido <= monto_aprobado))
 fuentes_pago           | fuentes_pago_tipo_check                     | CHECK           |                     | fuentes_pago           | tipo                    | ((tipo)::text = ANY ((ARRAY['Cuota Inicial'::character varying, 'Cr├®dito Hipotecario'::character varying, 'Subsidio Mi Casa Ya'::character varying, 'Subsidio Caja Compensaci├│n'::character varying])::text[]))
 fuentes_pago           | fuentes_pago_negociacion_id_fkey            | FOREIGN KEY     | negociacion_id      | negociaciones          | id                      | 
 fuentes_pago           | fuentes_pago_pkey                           | PRIMARY KEY     | id                  | fuentes_pago           | id                      | 
 manzanas               | 2200_17475_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 manzanas               | 2200_17475_2_not_null                       | CHECK           |                     |                        |                         | proyecto_id IS NOT NULL
 manzanas               | 2200_17475_3_not_null                       | CHECK           |                     |                        |                         | nombre IS NOT NULL
 manzanas               | 2200_17475_4_not_null                       | CHECK           |                     |                        |                         | numero_viviendas IS NOT NULL
 manzanas               | manzanas_numero_viviendas_check             | CHECK           |                     | manzanas               | numero_viviendas        | (numero_viviendas > 0)
 manzanas               | manzanas_proyecto_id_fkey                   | FOREIGN KEY     | proyecto_id         | proyectos              | id                      | 
 manzanas               | manzanas_pkey                               | PRIMARY KEY     | id                  | manzanas               | id                      | 
 negociaciones          | 2200_20604_12_not_null                      | CHECK           |                     |                        |                         | fecha_negociacion IS NOT NULL
 negociaciones          | 2200_20604_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 negociaciones          | 2200_20604_24_not_null                      | CHECK           |                     |                        |                         | fecha_creacion IS NOT NULL
 negociaciones          | 2200_20604_25_not_null                      | CHECK           |                     |                        |                         | fecha_actualizacion IS NOT NULL
 negociaciones          | 2200_20604_2_not_null                       | CHECK           |                     |                        |                         | cliente_id IS NOT NULL
 negociaciones          | 2200_20604_3_not_null                       | CHECK           |                     |                        |                         | vivienda_id IS NOT NULL
 negociaciones          | 2200_20604_4_not_null                       | CHECK           |                     |                        |                         | estado IS NOT NULL
 negociaciones          | 2200_20604_5_not_null                       | CHECK           |                     |                        |                         | valor_negociado IS NOT NULL
 negociaciones          | negociaciones_completada_fecha              | CHECK           |                     | negociaciones          | estado                  | (((estado)::text <> 'Completada'::text) OR (((estado)::text = 'Completada'::text) AND (fecha_completada IS NOT NULL)))
 negociaciones          | negociaciones_completada_fecha              | CHECK           |                     | negociaciones          | fecha_completada        | (((estado)::text <> 'Completada'::text) OR (((estado)::text = 'Completada'::text) AND (fecha_completada IS NOT NULL)))
 negociaciones          | negociaciones_descuento_valido              | CHECK           |                     | negociaciones          | descuento_aplicado      | ((descuento_aplicado >= (0)::numeric) AND (descuento_aplicado < valor_negociado))
 negociaciones          | negociaciones_descuento_valido              | CHECK           |                     | negociaciones          | valor_negociado         | ((descuento_aplicado >= (0)::numeric) AND (descuento_aplicado < valor_negociado))
 negociaciones          | negociaciones_estado_check                  | CHECK           |                     | negociaciones          | estado                  | ((estado)::text = ANY (ARRAY[('Activa'::character varying)::text, ('Suspendida'::character varying)::text, ('Cerrada por Renuncia'::character varying)::text, ('Completada'::character varying)::text]))
 negociaciones          | negociaciones_renuncia_fecha                | CHECK           |                     | negociaciones          | fecha_renuncia_efectiva | (((estado)::text <> 'Cerrada por Renuncia'::text) OR (((estado)::text = 'Cerrada por Renuncia'::text) AND (fecha_renuncia_efectiva IS NOT NULL)))
 negociaciones          | negociaciones_renuncia_fecha                | CHECK           |                     | negociaciones          | estado                  | (((estado)::text <> 'Cerrada por Renuncia'::text) OR (((estado)::text = 'Cerrada por Renuncia'::text) AND (fecha_renuncia_efectiva IS NOT NULL)))
 negociaciones          | negociaciones_valor_positivo                | CHECK           |                     | negociaciones          | valor_negociado         | (valor_negociado > (0)::numeric)
 negociaciones          | negociaciones_cliente_id_fkey               | FOREIGN KEY     | cliente_id          | clientes               | id                      | 
 negociaciones          | negociaciones_usuario_creacion_fkey         | FOREIGN KEY     | usuario_creacion    |                        |                         | 
 negociaciones          | negociaciones_vivienda_id_fkey              | FOREIGN KEY     | vivienda_id         | viviendas              | id                      | 
 negociaciones          | negociaciones_pkey                          | PRIMARY KEY     | id                  | negociaciones          | id                      | 
 plantillas_proceso     | 2200_20702_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 plantillas_proceso     | 2200_20702_2_not_null                       | CHECK           |                     |                        |                         | nombre IS NOT NULL
 plantillas_proceso     | 2200_20702_4_not_null                       | CHECK           |                     |                        |                         | pasos IS NOT NULL
 plantillas_proceso     | 2200_20702_5_not_null                       | CHECK           |                     |                        |                         | activo IS NOT NULL
 plantillas_proceso     | 2200_20702_6_not_null                       | CHECK           |                     |                        |                         | es_predeterminado IS NOT NULL
 plantillas_proceso     | 2200_20702_7_not_null                       | CHECK           |                     |                        |                         | fecha_creacion IS NOT NULL
 plantillas_proceso     | 2200_20702_8_not_null                       | CHECK           |                     |                        |                         | fecha_actualizacion IS NOT NULL
 plantillas_proceso     | plantillas_proceso_usuario_creacion_fkey    | FOREIGN KEY     | usuario_creacion    |                        |                         | 
 plantillas_proceso     | plantillas_proceso_pkey                     | PRIMARY KEY     | id                  | plantillas_proceso     | id                      | 
 procesos_negociacion   | 2200_20673_17_not_null                      | CHECK           |                     |                        |                         | fecha_creacion IS NOT NULL
 procesos_negociacion   | 2200_20673_18_not_null                      | CHECK           |                     |                        |                         | fecha_actualizacion IS NOT NULL
 procesos_negociacion   | 2200_20673_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 procesos_negociacion   | 2200_20673_2_not_null                       | CHECK           |                     |                        |                         | negociacion_id IS NOT NULL
 procesos_negociacion   | 2200_20673_3_not_null                       | CHECK           |                     |                        |                         | nombre IS NOT NULL
 procesos_negociacion   | 2200_20673_5_not_null                       | CHECK           |                     |                        |                         | orden IS NOT NULL
 procesos_negociacion   | 2200_20673_6_not_null                       | CHECK           |                     |                        |                         | es_obligatorio IS NOT NULL
 procesos_negociacion   | 2200_20673_7_not_null                       | CHECK           |                     |                        |                         | permite_omitir IS NOT NULL
 procesos_negociacion   | 2200_20673_8_not_null                       | CHECK           |                     |                        |                         | estado IS NOT NULL
 procesos_negociacion   | procesos_negociacion_estado_check           | CHECK           |                     | procesos_negociacion   | estado                  | ((estado)::text = ANY ((ARRAY['Pendiente'::character varying, 'En Proceso'::character varying, 'Completado'::character varying, 'Omitido'::character varying])::text[]))
 procesos_negociacion   | procesos_negociacion_orden_positivo         | CHECK           |                     | procesos_negociacion   | orden                   | (orden > 0)
 procesos_negociacion   | procesos_negociacion_negociacion_id_fkey    | FOREIGN KEY     | negociacion_id      | negociaciones          | id                      | 
 procesos_negociacion   | procesos_negociacion_usuario_completo_fkey  | FOREIGN KEY     | usuario_completo    |                        |                         | 
 procesos_negociacion   | procesos_negociacion_pkey                   | PRIMARY KEY     | id                  | procesos_negociacion   | id                      | 
 proyectos              | 2200_17452_10_not_null                      | CHECK           |                     |                        |                         | responsable IS NOT NULL
 proyectos              | 2200_17452_11_not_null                      | CHECK           |                     |                        |                         | telefono IS NOT NULL
 proyectos              | 2200_17452_12_not_null                      | CHECK           |                     |                        |                         | email IS NOT NULL
 proyectos              | 2200_17452_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 proyectos              | 2200_17452_2_not_null                       | CHECK           |                     |                        |                         | nombre IS NOT NULL
 proyectos              | 2200_17452_3_not_null                       | CHECK           |                     |                        |                         | descripcion IS NOT NULL
 proyectos              | 2200_17452_4_not_null                       | CHECK           |                     |                        |                         | ubicacion IS NOT NULL
 proyectos              | 2200_17452_5_not_null                       | CHECK           |                     |                        |                         | fecha_inicio IS NOT NULL
 proyectos              | 2200_17452_6_not_null                       | CHECK           |                     |                        |                         | fecha_fin_estimada IS NOT NULL
 proyectos              | 2200_17452_7_not_null                       | CHECK           |                     |                        |                         | presupuesto IS NOT NULL
 proyectos              | 2200_17452_8_not_null                       | CHECK           |                     |                        |                         | estado IS NOT NULL
 proyectos              | 2200_17452_9_not_null                       | CHECK           |                     |                        |                         | progreso IS NOT NULL
 proyectos              | proyectos_estado_check                      | CHECK           |                     | proyectos              | estado                  | ((estado)::text = ANY ((ARRAY['en_planificacion'::character varying, 'en_construccion'::character varying, 'completado'::character varying, 'pausado'::character varying])::text[]))
 proyectos              | proyectos_progreso_check                    | CHECK           |                     | proyectos              | progreso                | ((progreso >= 0) AND (progreso <= 100))
 proyectos              | proyectos_user_id_fkey                      | FOREIGN KEY     | user_id             |                        |                         | 
 proyectos              | proyectos_pkey                              | PRIMARY KEY     | id                  | proyectos              | id                      | 
 renuncias              | 2200_17549_13_not_null                      | CHECK           |                     |                        |                         | requiere_devolucion IS NOT NULL
 renuncias              | 2200_17549_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 renuncias              | 2200_17549_2_not_null                       | CHECK           |                     |                        |                         | vivienda_id IS NOT NULL
 renuncias              | 2200_17549_3_not_null                       | CHECK           |                     |                        |                         | cliente_id IS NOT NULL
 renuncias              | 2200_17549_4_not_null                       | CHECK           |                     |                        |                         | motivo IS NOT NULL
 renuncias              | 2200_17549_5_not_null                       | CHECK           |                     |                        |                         | fecha_renuncia IS NOT NULL
 renuncias              | 2200_17549_6_not_null                       | CHECK           |                     |                        |                         | monto_a_devolver IS NOT NULL
 renuncias              | 2200_17549_7_not_null                       | CHECK           |                     |                        |                         | estado IS NOT NULL
 renuncias              | renuncias_cancelada_motivo_check            | CHECK           |                     | renuncias              | estado                  | (((estado)::text <> 'Cancelada'::text) OR (((estado)::text = 'Cancelada'::text) AND (motivo_cancelacion IS NOT NULL)))
 renuncias              | renuncias_cancelada_motivo_check            | CHECK           |                     | renuncias              | motivo_cancelacion      | (((estado)::text <> 'Cancelada'::text) OR (((estado)::text = 'Cancelada'::text) AND (motivo_cancelacion IS NOT NULL)))
 renuncias              | renuncias_cerrada_devolucion_check          | CHECK           |                     | renuncias              | fecha_devolucion        | (((estado)::text <> 'Cerrada'::text) OR (((estado)::text = 'Cerrada'::text) AND (requiere_devolucion = false)) OR (((estado)::text = 'Cerrada'::text) AND (requiere_devolucion = true) AND (fecha_devolucion IS NOT NULL)))
 renuncias              | renuncias_cerrada_devolucion_check          | CHECK           |                     | renuncias              | estado                  | (((estado)::text <> 'Cerrada'::text) OR (((estado)::text = 'Cerrada'::text) AND (requiere_devolucion = false)) OR (((estado)::text = 'Cerrada'::text) AND (requiere_devolucion = true) AND (fecha_devolucion IS NOT NULL)))
 renuncias              | renuncias_cerrada_devolucion_check          | CHECK           |                     | renuncias              | requiere_devolucion     | (((estado)::text <> 'Cerrada'::text) OR (((estado)::text = 'Cerrada'::text) AND (requiere_devolucion = false)) OR (((estado)::text = 'Cerrada'::text) AND (requiere_devolucion = true) AND (fecha_devolucion IS NOT NULL)))
 renuncias              | renuncias_devolucion_check                  | CHECK           |                     | renuncias              | requiere_devolucion     | (((requiere_devolucion = false) AND (monto_a_devolver = (0)::numeric)) OR ((requiere_devolucion = true) AND (monto_a_devolver > (0)::numeric)))
 renuncias              | renuncias_devolucion_check                  | CHECK           |                     | renuncias              | monto_a_devolver        | (((requiere_devolucion = false) AND (monto_a_devolver = (0)::numeric)) OR ((requiere_devolucion = true) AND (monto_a_devolver > (0)::numeric)))
 renuncias              | renuncias_estado_check                      | CHECK           |                     | renuncias              | estado                  | ((estado)::text = ANY (ARRAY[('Pendiente Devoluci├│n'::character varying)::text, ('Cerrada'::character varying)::text, ('Cancelada'::character varying)::text]))
 renuncias              | renuncias_negociacion_id_fkey               | FOREIGN KEY     | negociacion_id      | negociaciones          | id                      | 
 renuncias              | renuncias_usuario_cancelacion_fkey          | FOREIGN KEY     | usuario_cancelacion |                        |                         | 
 renuncias              | renuncias_usuario_cierre_fkey               | FOREIGN KEY     | usuario_cierre      |                        |                         | 
 renuncias              | renuncias_usuario_registro_fkey             | FOREIGN KEY     | usuario_registro    |                        |                         | 
 renuncias              | renuncias_vivienda_id_fkey                  | FOREIGN KEY     | vivienda_id         | viviendas              | id                      | 
 renuncias              | renuncias_pkey                              | PRIMARY KEY     | id                  | renuncias              | id                      | 
 viviendas              | 2200_17503_1_not_null                       | CHECK           |                     |                        |                         | id IS NOT NULL
 viviendas              | 2200_17503_20_not_null                      | CHECK           |                     |                        |                         | valor_base IS NOT NULL
 viviendas              | 2200_17503_2_not_null                       | CHECK           |                     |                        |                         | manzana_id IS NOT NULL
 viviendas              | 2200_17503_3_not_null                       | CHECK           |                     |                        |                         | numero IS NOT NULL
 viviendas              | 2200_17503_4_not_null                       | CHECK           |                     |                        |                         | estado IS NOT NULL
 viviendas              | 2200_17503_5_not_null                       | CHECK           |                     |                        |                         | precio IS NOT NULL
 viviendas              | 2200_17503_6_not_null                       | CHECK           |                     |                        |                         | area IS NOT NULL
 viviendas              | viviendas_asignada_tiene_cliente            | CHECK           |                     | viviendas              | estado                  | (((estado)::text <> 'Asignada'::text) OR (((estado)::text = 'Asignada'::text) AND (cliente_id IS NOT NULL)))
 viviendas              | viviendas_asignada_tiene_cliente            | CHECK           |                     | viviendas              | cliente_id              | (((estado)::text <> 'Asignada'::text) OR (((estado)::text = 'Asignada'::text) AND (cliente_id IS NOT NULL)))
 viviendas              | viviendas_asignada_tiene_negociacion        | CHECK           |                     | viviendas              | estado                  | (((estado)::text <> 'Asignada'::text) OR (((estado)::text = 'Asignada'::text) AND (negociacion_id IS NOT NULL)))
 viviendas              | viviendas_asignada_tiene_negociacion        | CHECK           |                     | viviendas              | negociacion_id          | (((estado)::text <> 'Asignada'::text) OR (((estado)::text = 'Asignada'::text) AND (negociacion_id IS NOT NULL)))
 viviendas              | viviendas_entregada_tiene_fecha             | CHECK           |                     | viviendas              | fecha_entrega           | (((estado)::text <> 'Entregada'::text) OR (((estado)::text = 'Entregada'::text) AND (fecha_entrega IS NOT NULL)))
 viviendas              | viviendas_entregada_tiene_fecha             | CHECK           |                     | viviendas              | estado                  | (((estado)::text <> 'Entregada'::text) OR (((estado)::text = 'Entregada'::text) AND (fecha_entrega IS NOT NULL)))
 viviendas              | viviendas_estado_check                      | CHECK           |                     | viviendas              | estado                  | ((estado)::text = ANY (ARRAY[('Disponible'::character varying)::text, ('Asignada'::character varying)::text, ('Entregada'::character varying)::text]))
 viviendas              | viviendas_tipo_vivienda_check               | CHECK           |                     | viviendas              | tipo_vivienda           | ((tipo_vivienda)::text = ANY ((ARRAY['Regular'::character varying, 'Irregular'::character varying])::text[]))
 viviendas              | viviendas_manzana_id_fkey                   | FOREIGN KEY     | manzana_id          | manzanas               | id                      | 
 viviendas              | viviendas_negociacion_id_fkey               | FOREIGN KEY     | negociacion_id      | negociaciones          | id                      | 
 viviendas              | viviendas_pkey                              | PRIMARY KEY     | id                  | viviendas              | id                      | 
(250 rows)


========================================

­ƒôç ├ìNDICES DE TODAS LAS TABLAS

 schemaname |       tablename        |                    indexname                     |                                                                                                                                                indexdef                                                                                                                                                
------------+------------------------+--------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 public     | abonos                 | abonos_pkey                                      | CREATE UNIQUE INDEX abonos_pkey ON public.abonos USING btree (id)
 public     | abonos                 | idx_abonos_cliente_id                            | CREATE INDEX idx_abonos_cliente_id ON public.abonos USING btree (cliente_id)
 public     | abonos                 | idx_abonos_fecha                                 | CREATE INDEX idx_abonos_fecha ON public.abonos USING btree (fecha_abono)
 public     | abonos                 | idx_abonos_vivienda_id                           | CREATE INDEX idx_abonos_vivienda_id ON public.abonos USING btree (vivienda_id)
 public     | abonos_historial       | abonos_historial_pkey                            | CREATE UNIQUE INDEX abonos_historial_pkey ON public.abonos_historial USING btree (id)
 public     | abonos_historial       | idx_abonos_historial_fecha                       | CREATE INDEX idx_abonos_historial_fecha ON public.abonos_historial USING btree (fecha_abono DESC)
 public     | abonos_historial       | idx_abonos_historial_fuente                      | CREATE INDEX idx_abonos_historial_fuente ON public.abonos_historial USING btree (fuente_pago_id)
 public     | abonos_historial       | idx_abonos_historial_metodo                      | CREATE INDEX idx_abonos_historial_metodo ON public.abonos_historial USING btree (metodo_pago)
 public     | abonos_historial       | idx_abonos_historial_negociacion                 | CREATE INDEX idx_abonos_historial_negociacion ON public.abonos_historial USING btree (negociacion_id)
 public     | audit_log_seguridad    | audit_log_seguridad_pkey                         | CREATE UNIQUE INDEX audit_log_seguridad_pkey ON public.audit_log_seguridad USING btree (id)
 public     | audit_log_seguridad    | idx_audit_log_fecha                              | CREATE INDEX idx_audit_log_fecha ON public.audit_log_seguridad USING btree (fecha_evento DESC)
 public     | audit_log_seguridad    | idx_audit_log_ip                                 | CREATE INDEX idx_audit_log_ip ON public.audit_log_seguridad USING btree (ip_address)
 public     | audit_log_seguridad    | idx_audit_log_metadata                           | CREATE INDEX idx_audit_log_metadata ON public.audit_log_seguridad USING gin (metadata)
 public     | audit_log_seguridad    | idx_audit_log_tipo                               | CREATE INDEX idx_audit_log_tipo ON public.audit_log_seguridad USING btree (tipo)
 public     | audit_log_seguridad    | idx_audit_log_usuario_email                      | CREATE INDEX idx_audit_log_usuario_email ON public.audit_log_seguridad USING btree (usuario_email)
 public     | audit_log_seguridad    | idx_audit_log_usuario_id                         | CREATE INDEX idx_audit_log_usuario_id ON public.audit_log_seguridad USING btree (usuario_id)
 public     | categorias_documento   | categorias_documento_pkey                        | CREATE UNIQUE INDEX categorias_documento_pkey ON public.categorias_documento USING btree (id)
 public     | categorias_documento   | categorias_documento_user_id_nombre_key          | CREATE UNIQUE INDEX categorias_documento_user_id_nombre_key ON public.categorias_documento USING btree (user_id, nombre)
 public     | categorias_documento   | idx_categorias_es_global                         | CREATE INDEX idx_categorias_es_global ON public.categorias_documento USING btree (es_global)
 public     | categorias_documento   | idx_categorias_modulos_permitidos                | CREATE INDEX idx_categorias_modulos_permitidos ON public.categorias_documento USING gin (modulos_permitidos)
 public     | categorias_documento   | idx_categorias_user_id                           | CREATE INDEX idx_categorias_user_id ON public.categorias_documento USING btree (user_id)
 public     | cliente_intereses      | cliente_intereses_pkey                           | CREATE UNIQUE INDEX cliente_intereses_pkey ON public.cliente_intereses USING btree (id)
 public     | cliente_intereses      | idx_cliente_intereses_estado                     | CREATE INDEX idx_cliente_intereses_estado ON public.cliente_intereses USING btree (estado)
 public     | cliente_intereses      | idx_cliente_intereses_fecha_interes              | CREATE INDEX idx_cliente_intereses_fecha_interes ON public.cliente_intereses USING btree (fecha_interes DESC)
 public     | cliente_intereses      | idx_cliente_intereses_prioridad                  | CREATE INDEX idx_cliente_intereses_prioridad ON public.cliente_intereses USING btree (prioridad)
 public     | cliente_intereses      | idx_cliente_intereses_proximo_seguimiento        | CREATE INDEX idx_cliente_intereses_proximo_seguimiento ON public.cliente_intereses USING btree (proximo_seguimiento) WHERE ((estado)::text = ANY ((ARRAY['Pendiente'::character varying, 'Contactado'::character varying, 'En Seguimiento'::character varying, 'Activo'::character varying])::text[]))
 public     | cliente_intereses      | idx_intereses_cliente_estado                     | CREATE INDEX idx_intereses_cliente_estado ON public.cliente_intereses USING btree (cliente_id, estado)
 public     | cliente_intereses      | idx_intereses_cliente_id                         | CREATE INDEX idx_intereses_cliente_id ON public.cliente_intereses USING btree (cliente_id)
 public     | cliente_intereses      | idx_intereses_estado                             | CREATE INDEX idx_intereses_estado ON public.cliente_intereses USING btree (estado)
 public     | cliente_intereses      | idx_intereses_fecha                              | CREATE INDEX idx_intereses_fecha ON public.cliente_intereses USING btree (fecha_interes DESC)
 public     | cliente_intereses      | idx_intereses_proyecto_id                        | CREATE INDEX idx_intereses_proyecto_id ON public.cliente_intereses USING btree (proyecto_id)
 public     | cliente_intereses      | idx_intereses_vivienda_id                        | CREATE INDEX idx_intereses_vivienda_id ON public.cliente_intereses USING btree (vivienda_id)
 public     | cliente_intereses      | interes_unico                                    | CREATE UNIQUE INDEX interes_unico ON public.cliente_intereses USING btree (cliente_id, proyecto_id, vivienda_id, estado)
 public     | clientes               | clientes_documento_unico                         | CREATE UNIQUE INDEX clientes_documento_unico ON public.clientes USING btree (tipo_documento, numero_documento)
 public     | clientes               | clientes_pkey                                    | CREATE UNIQUE INDEX clientes_pkey ON public.clientes USING btree (id)
 public     | clientes               | idx_clientes_activo_vivienda                     | CREATE INDEX idx_clientes_activo_vivienda ON public.clientes USING btree (id, estado) WHERE ((estado)::text = 'Activo'::text)
 public     | clientes               | idx_clientes_email                               | CREATE INDEX idx_clientes_email ON public.clientes USING btree (email)
 public     | clientes               | idx_clientes_estado                              | CREATE INDEX idx_clientes_estado ON public.clientes USING btree (estado)
 public     | clientes               | idx_clientes_estado_propietario                  | CREATE INDEX idx_clientes_estado_propietario ON public.clientes USING btree (estado) WHERE ((estado)::text = 'Propietario'::text)
 public     | clientes               | idx_clientes_estado_renuncia                     | CREATE INDEX idx_clientes_estado_renuncia ON public.clientes USING btree (estado) WHERE ((estado)::text = 'En Proceso de Renuncia'::text)
 public     | clientes               | idx_clientes_fecha_creacion                      | CREATE INDEX idx_clientes_fecha_creacion ON public.clientes USING btree (fecha_creacion DESC)
 public     | clientes               | idx_clientes_nombre_completo                     | CREATE INDEX idx_clientes_nombre_completo ON public.clientes USING btree (nombre_completo)
 public     | clientes               | idx_clientes_numero_documento                    | CREATE INDEX idx_clientes_numero_documento ON public.clientes USING btree (numero_documento)
 public     | configuracion_recargos | configuracion_recargos_pkey                      | CREATE UNIQUE INDEX configuracion_recargos_pkey ON public.configuracion_recargos USING btree (id)
 public     | configuracion_recargos | configuracion_recargos_tipo_key                  | CREATE UNIQUE INDEX configuracion_recargos_tipo_key ON public.configuracion_recargos USING btree (tipo)
 public     | configuracion_recargos | idx_configuracion_recargos_activo                | CREATE INDEX idx_configuracion_recargos_activo ON public.configuracion_recargos USING btree (activo)
 public     | configuracion_recargos | idx_configuracion_recargos_tipo                  | CREATE INDEX idx_configuracion_recargos_tipo ON public.configuracion_recargos USING btree (tipo)
 public     | documentos_cliente     | documentos_cliente_pkey                          | CREATE UNIQUE INDEX documentos_cliente_pkey ON public.documentos_cliente USING btree (id)
 public     | documentos_cliente     | idx_docs_cliente_categoria_id                    | CREATE INDEX idx_docs_cliente_categoria_id ON public.documentos_cliente USING btree (categoria_id)
 public     | documentos_cliente     | idx_docs_cliente_cliente_id                      | CREATE INDEX idx_docs_cliente_cliente_id ON public.documentos_cliente USING btree (cliente_id)
 public     | documentos_cliente     | idx_docs_cliente_documento_padre_id              | CREATE INDEX idx_docs_cliente_documento_padre_id ON public.documentos_cliente USING btree (documento_padre_id)
 public     | documentos_cliente     | idx_docs_cliente_estado                          | CREATE INDEX idx_docs_cliente_estado ON public.documentos_cliente USING btree (estado)
 public     | documentos_cliente     | idx_docs_cliente_etiquetas                       | CREATE INDEX idx_docs_cliente_etiquetas ON public.documentos_cliente USING gin (etiquetas)
 public     | documentos_cliente     | idx_docs_cliente_fecha_vencimiento               | CREATE INDEX idx_docs_cliente_fecha_vencimiento ON public.documentos_cliente USING btree (fecha_vencimiento)
 public     | documentos_cliente     | idx_docs_cliente_importante                      | CREATE INDEX idx_docs_cliente_importante ON public.documentos_cliente USING btree (es_importante)
 public     | documentos_proyecto    | documentos_proyecto_pkey                         | CREATE UNIQUE INDEX documentos_proyecto_pkey ON public.documentos_proyecto USING btree (id)
 public     | documentos_proyecto    | idx_documentos_categoria_id                      | CREATE INDEX idx_documentos_categoria_id ON public.documentos_proyecto USING btree (categoria_id)
 public     | documentos_proyecto    | idx_documentos_estado                            | CREATE INDEX idx_documentos_estado ON public.documentos_proyecto USING btree (estado)
 public     | documentos_proyecto    | idx_documentos_etiquetas                         | CREATE INDEX idx_documentos_etiquetas ON public.documentos_proyecto USING gin (etiquetas)
 public     | documentos_proyecto    | idx_documentos_fecha_vencimiento                 | CREATE INDEX idx_documentos_fecha_vencimiento ON public.documentos_proyecto USING btree (fecha_vencimiento)
 public     | documentos_proyecto    | idx_documentos_importante                        | CREATE INDEX idx_documentos_importante ON public.documentos_proyecto USING btree (es_importante)
 public     | documentos_proyecto    | idx_documentos_padre_id                          | CREATE INDEX idx_documentos_padre_id ON public.documentos_proyecto USING btree (documento_padre_id)
 public     | documentos_proyecto    | idx_documentos_proyecto_id                       | CREATE INDEX idx_documentos_proyecto_id ON public.documentos_proyecto USING btree (proyecto_id)
 public     | fuentes_pago           | fuentes_pago_pkey                                | CREATE UNIQUE INDEX fuentes_pago_pkey ON public.fuentes_pago USING btree (id)
 public     | fuentes_pago           | idx_fuentes_pago_estado                          | CREATE INDEX idx_fuentes_pago_estado ON public.fuentes_pago USING btree (estado)
 public     | fuentes_pago           | idx_fuentes_pago_negociacion                     | CREATE INDEX idx_fuentes_pago_negociacion ON public.fuentes_pago USING btree (negociacion_id)
 public     | fuentes_pago           | idx_fuentes_pago_tipo                            | CREATE INDEX idx_fuentes_pago_tipo ON public.fuentes_pago USING btree (tipo)
 public     | manzanas               | idx_manzanas_proyecto_id                         | CREATE INDEX idx_manzanas_proyecto_id ON public.manzanas USING btree (proyecto_id)
 public     | manzanas               | manzanas_pkey                                    | CREATE UNIQUE INDEX manzanas_pkey ON public.manzanas USING btree (id)
 public     | negociaciones          | idx_negociaciones_activas_cliente                | CREATE INDEX idx_negociaciones_activas_cliente ON public.negociaciones USING btree (cliente_id, estado, fecha_creacion DESC) WHERE ((estado)::text = 'Activa'::text)
 public     | negociaciones          | idx_negociaciones_activas_cliente_vivienda_unica | CREATE UNIQUE INDEX idx_negociaciones_activas_cliente_vivienda_unica ON public.negociaciones USING btree (cliente_id, vivienda_id) WHERE ((estado)::text = ANY ((ARRAY['En Proceso'::character varying, 'Cierre Financiero'::character varying, 'Activa'::character varying])::text[]))
 public     | negociaciones          | idx_negociaciones_cliente                        | CREATE INDEX idx_negociaciones_cliente ON public.negociaciones USING btree (cliente_id)
 public     | negociaciones          | idx_negociaciones_completadas                    | CREATE INDEX idx_negociaciones_completadas ON public.negociaciones USING btree (fecha_completada DESC) WHERE ((estado)::text = 'Completada'::text)
 public     | negociaciones          | idx_negociaciones_estado                         | CREATE INDEX idx_negociaciones_estado ON public.negociaciones USING btree (estado)
 public     | negociaciones          | idx_negociaciones_estado_activa                  | CREATE INDEX idx_negociaciones_estado_activa ON public.negociaciones USING btree (estado, cliente_id) WHERE ((estado)::text = 'Activa'::text)
 public     | negociaciones          | idx_negociaciones_estado_suspendida              | CREATE INDEX idx_negociaciones_estado_suspendida ON public.negociaciones USING btree (estado) WHERE ((estado)::text = 'Suspendida'::text)
 public     | negociaciones          | idx_negociaciones_fecha_creacion                 | CREATE INDEX idx_negociaciones_fecha_creacion ON public.negociaciones USING btree (fecha_creacion DESC)
 public     | negociaciones          | idx_negociaciones_renuncias                      | CREATE INDEX idx_negociaciones_renuncias ON public.negociaciones USING btree (fecha_renuncia_efectiva DESC) WHERE ((estado)::text = 'Cerrada por Renuncia'::text)
 public     | negociaciones          | idx_negociaciones_vivienda                       | CREATE INDEX idx_negociaciones_vivienda ON public.negociaciones USING btree (vivienda_id)
 public     | negociaciones          | negociaciones_pkey                               | CREATE UNIQUE INDEX negociaciones_pkey ON public.negociaciones USING btree (id)
 public     | plantillas_proceso     | plantillas_proceso_pkey                          | CREATE UNIQUE INDEX plantillas_proceso_pkey ON public.plantillas_proceso USING btree (id)
 public     | procesos_negociacion   | idx_procesos_negociacion_estado                  | CREATE INDEX idx_procesos_negociacion_estado ON public.procesos_negociacion USING btree (estado)
 public     | procesos_negociacion   | idx_procesos_negociacion_negociacion             | CREATE INDEX idx_procesos_negociacion_negociacion ON public.procesos_negociacion USING btree (negociacion_id)
 public     | procesos_negociacion   | idx_procesos_negociacion_orden                   | CREATE INDEX idx_procesos_negociacion_orden ON public.procesos_negociacion USING btree (negociacion_id, orden)
 public     | procesos_negociacion   | procesos_negociacion_pkey                        | CREATE UNIQUE INDEX procesos_negociacion_pkey ON public.procesos_negociacion USING btree (id)
 public     | proyectos              | idx_proyectos_estado                             | CREATE INDEX idx_proyectos_estado ON public.proyectos USING btree (estado)
 public     | proyectos              | idx_proyectos_fecha_inicio                       | CREATE INDEX idx_proyectos_fecha_inicio ON public.proyectos USING btree (fecha_inicio)
 public     | proyectos              | idx_proyectos_user_id                            | CREATE INDEX idx_proyectos_user_id ON public.proyectos USING btree (user_id)
 public     | proyectos              | proyectos_pkey                                   | CREATE UNIQUE INDEX proyectos_pkey ON public.proyectos USING btree (id)
 public     | renuncias              | idx_renuncias_cliente_id                         | CREATE INDEX idx_renuncias_cliente_id ON public.renuncias USING btree (cliente_id)
 public     | renuncias              | idx_renuncias_estado                             | CREATE INDEX idx_renuncias_estado ON public.renuncias USING btree (estado)
 public     | renuncias              | idx_renuncias_fecha_cierre                       | CREATE INDEX idx_renuncias_fecha_cierre ON public.renuncias USING btree (fecha_cierre DESC) WHERE (fecha_cierre IS NOT NULL)
 public     | renuncias              | idx_renuncias_fecha_renuncia                     | CREATE INDEX idx_renuncias_fecha_renuncia ON public.renuncias USING btree (fecha_renuncia DESC)
 public     | renuncias              | idx_renuncias_negociacion                        | CREATE INDEX idx_renuncias_negociacion ON public.renuncias USING btree (negociacion_id)
 public     | renuncias              | idx_renuncias_requiere_devolucion                | CREATE INDEX idx_renuncias_requiere_devolucion ON public.renuncias USING btree (requiere_devolucion) WHERE (requiere_devolucion = true)
 public     | renuncias              | idx_renuncias_vivienda_id                        | CREATE INDEX idx_renuncias_vivienda_id ON public.renuncias USING btree (vivienda_id)
 public     | renuncias              | renuncias_pkey                                   | CREATE UNIQUE INDEX renuncias_pkey ON public.renuncias USING btree (id)
 public     | viviendas              | idx_matricula_inmobiliaria_unica                 | CREATE UNIQUE INDEX idx_matricula_inmobiliaria_unica ON public.viviendas USING btree (matricula_inmobiliaria) WHERE (matricula_inmobiliaria IS NOT NULL)
 public     | viviendas              | idx_viviendas_cliente_id                         | CREATE INDEX idx_viviendas_cliente_id ON public.viviendas USING btree (cliente_id)
 public     | viviendas              | idx_viviendas_disponibles_manzana                | CREATE INDEX idx_viviendas_disponibles_manzana ON public.viviendas USING btree (manzana_id, estado, numero) WHERE ((estado)::text = 'Disponible'::text)
 public     | viviendas              | idx_viviendas_estado                             | CREATE INDEX idx_viviendas_estado ON public.viviendas USING btree (estado)
 public     | viviendas              | idx_viviendas_estado_asignada                    | CREATE INDEX idx_viviendas_estado_asignada ON public.viviendas USING btree (estado, cliente_id) WHERE ((estado)::text = 'Asignada'::text)
 public     | viviendas              | idx_viviendas_fecha_entrega                      | CREATE INDEX idx_viviendas_fecha_entrega ON public.viviendas USING btree (fecha_entrega DESC) WHERE (fecha_entrega IS NOT NULL)
 public     | viviendas              | idx_viviendas_manzana_id                         | CREATE INDEX idx_viviendas_manzana_id ON public.viviendas USING btree (manzana_id)
 public     | viviendas              | idx_viviendas_negociacion                        | CREATE INDEX idx_viviendas_negociacion ON public.viviendas USING btree (negociacion_id) WHERE (negociacion_id IS NOT NULL)
 public     | viviendas              | viviendas_pkey                                   | CREATE UNIQUE INDEX viviendas_pkey ON public.viviendas USING btree (id)
(106 rows)


========================================

ÔÜÖ´©Å FUNCIONES ALMACENADAS

                routine_name                 | routine_type | return_type 
---------------------------------------------+--------------+-------------
 actualizar_estado_vivienda                  | FUNCTION     | trigger
 actualizar_monto_recibido_fuente            | FUNCTION     | trigger
 calcular_monto_devolver                     | FUNCTION     | trigger
 categoria_aplica_a_modulo                   | FUNCTION     | boolean
 convertir_interes_a_negociacion             | FUNCTION     | uuid
 limpiar_logs_antiguos                       | FUNCTION     | integer
 marcar_interes_convertido                   | FUNCTION     | void
 obtener_resumen_seguridad                   | FUNCTION     | record
 obtener_siguiente_numero_vivienda           | FUNCTION     | integer
 obtener_snapshot_abonos                     | FUNCTION     | jsonb
 obtener_viviendas_disponibles_manzana       | FUNCTION     | integer
 registrar_interes_inicial                   | FUNCTION     | uuid
 update_abonos_historial_fecha_actualizacion | FUNCTION     | trigger
 update_cliente_estado_on_negociacion        | FUNCTION     | trigger
 update_negociaciones_fecha_actualizacion    | FUNCTION     | trigger
 update_negociaciones_totales                | FUNCTION     | trigger
 update_updated_at_column                    | FUNCTION     | trigger
 validar_abono_no_excede_saldo               | FUNCTION     | trigger
 validar_cancelacion_renuncia                | FUNCTION     | record
(19 rows)


­ƒöö TRIGGERS

       table_name       |                    trigger_name                     | event  | timing |                        action_statement                        
------------------------+-----------------------------------------------------+--------+--------+----------------------------------------------------------------
 abonos_historial       | trigger_actualizar_monto_recibido                   | DELETE | AFTER  | EXECUTE FUNCTION actualizar_monto_recibido_fuente()
 abonos_historial       | trigger_actualizar_monto_recibido                   | UPDATE | AFTER  | EXECUTE FUNCTION actualizar_monto_recibido_fuente()
 abonos_historial       | trigger_actualizar_monto_recibido                   | INSERT | AFTER  | EXECUTE FUNCTION actualizar_monto_recibido_fuente()
 abonos_historial       | trigger_update_abonos_historial_fecha_actualizacion | UPDATE | BEFORE | EXECUTE FUNCTION update_abonos_historial_fecha_actualizacion()
 abonos_historial       | trigger_validar_abono_no_excede_saldo               | INSERT | BEFORE | EXECUTE FUNCTION validar_abono_no_excede_saldo()
 abonos_historial       | trigger_validar_abono_no_excede_saldo               | UPDATE | BEFORE | EXECUTE FUNCTION validar_abono_no_excede_saldo()
 cliente_intereses      | update_cliente_intereses_fecha_actualizacion        | UPDATE | BEFORE | EXECUTE FUNCTION update_updated_at_column()
 configuracion_recargos | update_configuracion_recargos_fecha_actualizacion   | UPDATE | BEFORE | EXECUTE FUNCTION update_updated_at_column()
 documentos_cliente     | update_documentos_cliente_fecha_actualizacion       | UPDATE | BEFORE | EXECUTE FUNCTION update_updated_at_column()
 documentos_proyecto    | update_documentos_fecha_actualizacion               | UPDATE | BEFORE | EXECUTE FUNCTION update_updated_at_column()
 fuentes_pago           | trigger_update_negociaciones_totales_delete         | DELETE | AFTER  | EXECUTE FUNCTION update_negociaciones_totales()
 fuentes_pago           | trigger_update_negociaciones_totales_insert         | INSERT | AFTER  | EXECUTE FUNCTION update_negociaciones_totales()
 fuentes_pago           | trigger_update_negociaciones_totales_update         | UPDATE | AFTER  | EXECUTE FUNCTION update_negociaciones_totales()
 negociaciones          | trigger_update_cliente_estado_on_negociacion        | INSERT | AFTER  | EXECUTE FUNCTION update_cliente_estado_on_negociacion()
 negociaciones          | trigger_update_cliente_estado_on_negociacion        | UPDATE | AFTER  | EXECUTE FUNCTION update_cliente_estado_on_negociacion()
 negociaciones          | trigger_update_negociaciones_fecha_actualizacion    | UPDATE | BEFORE | EXECUTE FUNCTION update_negociaciones_fecha_actualizacion()
 proyectos              | update_proyectos_fecha_actualizacion                | UPDATE | BEFORE | EXECUTE FUNCTION update_updated_at_column()
 renuncias              | trigger_calcular_monto_devolver                     | INSERT | BEFORE | EXECUTE FUNCTION calcular_monto_devolver()
 renuncias              | update_renuncias_fecha_actualizacion                | UPDATE | BEFORE | EXECUTE FUNCTION update_updated_at_column()
 viviendas              | trigger_actualizar_estado_vivienda                  | UPDATE | BEFORE | EXECUTE FUNCTION actualizar_estado_vivienda()
 viviendas              | update_viviendas_fecha_actualizacion                | UPDATE | BEFORE | EXECUTE FUNCTION update_updated_at_column()
(21 rows)


========================================

­ƒæü´©Å VISTAS

          table_name           |                                                                                                                view_definition                                                                                                                 
-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 intereses_completos           |  SELECT i.id,                                                                                                                                                                                                                                 +
                               |     i.cliente_id,                                                                                                                                                                                                                             +
                               |     i.proyecto_id,                                                                                                                                                                                                                            +
                               |     i.vivienda_id,                                                                                                                                                                                                                            +
                               |     i.notas,                                                                                                                                                                                                                                  +
                               |     i.estado,                                                                                                                                                                                                                                 +
                               |     i.motivo_descarte,                                                                                                                                                                                                                        +
                               |     i.fecha_interes,                                                                                                                                                                                                                          +
                               |     i.fecha_actualizacion,                                                                                                                                                                                                                    +
                               |     i.usuario_creacion,                                                                                                                                                                                                                       +
                               |     i.valor_estimado,                                                                                                                                                                                                                         +
                               |     i.origen,                                                                                                                                                                                                                                 +
                               |     i.prioridad,                                                                                                                                                                                                                              +
                               |     i.fecha_ultimo_contacto,                                                                                                                                                                                                                  +
                               |     i.proximo_seguimiento,                                                                                                                                                                                                                    +
                               |     i.negociacion_id,                                                                                                                                                                                                                         +
                               |     i.fecha_conversion,                                                                                                                                                                                                                       +
                               |     c.nombres AS cliente_nombre,                                                                                                                                                                                                              +
                               |     c.apellidos AS cliente_apellido,                                                                                                                                                                                                          +
                               |     c.nombre_completo,                                                                                                                                                                                                                        +
                               |     c.email AS cliente_email,                                                                                                                                                                                                                 +
                               |     c.telefono AS cliente_telefono,                                                                                                                                                                                                           +
                               |     c.numero_documento AS cliente_documento,                                                                                                                                                                                                  +
                               |     p.nombre AS proyecto_nombre,                                                                                                                                                                                                              +
                               |     p.estado AS proyecto_estado,                                                                                                                                                                                                              +
                               |     v.numero AS vivienda_numero,                                                                                                                                                                                                              +
                               |     v.valor_total AS vivienda_valor,                                                                                                                                                                                                          +
                               |     v.estado AS vivienda_estado,                                                                                                                                                                                                              +
                               |     m.nombre AS manzana_nombre,                                                                                                                                                                                                               +
                               |     EXTRACT(day FROM (now() - i.fecha_interes)) AS dias_desde_interes,                                                                                                                                                                        +
                               |         CASE                                                                                                                                                                                                                                  +
                               |             WHEN ((i.proximo_seguimiento < now()) AND ((i.estado)::text = ANY ((ARRAY['Pendiente'::character varying, 'Contactado'::character varying, 'En Seguimiento'::character varying, 'Activo'::character varying])::text[]))) THEN true+
                               |             ELSE false                                                                                                                                                                                                                        +
                               |         END AS seguimiento_urgente                                                                                                                                                                                                            +
                               |    FROM ((((cliente_intereses i                                                                                                                                                                                                               +
                               |      JOIN clientes c ON ((i.cliente_id = c.id)))                                                                                                                                                                                              +
                               |      JOIN proyectos p ON ((i.proyecto_id = p.id)))                                                                                                                                                                                            +
                               |      LEFT JOIN viviendas v ON ((i.vivienda_id = v.id)))                                                                                                                                                                                       +
                               |      LEFT JOIN manzanas m ON ((v.manzana_id = m.id)))                                                                                                                                                                                         +
                               |   ORDER BY i.fecha_interes DESC;
 v_negociaciones_completas     |  SELECT n.id,                                                                                                                                                                                                                                 +
                               |     n.estado AS estado_negociacion,                                                                                                                                                                                                           +
                               |     n.fecha_creacion,                                                                                                                                                                                                                         +
                               |     n.valor_total,                                                                                                                                                                                                                            +
                               |     n.saldo_pendiente,                                                                                                                                                                                                                        +
                               |     n.fecha_completada,                                                                                                                                                                                                                       +
                               |     n.fecha_renuncia_efectiva,                                                                                                                                                                                                                +
                               |     c.id AS cliente_id,                                                                                                                                                                                                                       +
                               |     c.nombre_completo AS cliente_nombre,                                                                                                                                                                                                      +
                               |     c.numero_documento AS cliente_documento,                                                                                                                                                                                                  +
                               |     c.estado AS estado_cliente,                                                                                                                                                                                                               +
                               |     v.id AS vivienda_id,                                                                                                                                                                                                                      +
                               |     v.numero AS vivienda_numero,                                                                                                                                                                                                              +
                               |     v.estado AS estado_vivienda,                                                                                                                                                                                                              +
                               |     v.valor_total AS vivienda_valor,                                                                                                                                                                                                          +
                               |     v.fecha_entrega,                                                                                                                                                                                                                          +
                               |     p.id AS proyecto_id,                                                                                                                                                                                                                      +
                               |     p.nombre AS proyecto_nombre,                                                                                                                                                                                                              +
                               |     r.id AS renuncia_id,                                                                                                                                                                                                                      +
                               |     r.estado AS estado_renuncia,                                                                                                                                                                                                              +
                               |     r.fecha_renuncia,                                                                                                                                                                                                                         +
                               |     r.requiere_devolucion,                                                                                                                                                                                                                    +
                               |     r.monto_a_devolver                                                                                                                                                                                                                        +
                               |    FROM (((((negociaciones n                                                                                                                                                                                                                  +
                               |      JOIN clientes c ON ((c.id = n.cliente_id)))                                                                                                                                                                                              +
                               |      JOIN viviendas v ON ((v.id = n.vivienda_id)))                                                                                                                                                                                            +
                               |      JOIN manzanas m ON ((m.id = v.manzana_id)))                                                                                                                                                                                              +
                               |      JOIN proyectos p ON ((p.id = m.proyecto_id)))                                                                                                                                                                                            +
                               |      LEFT JOIN renuncias r ON (((r.negociacion_id = n.id) AND ((r.estado)::text <> 'Cancelada'::text))));
 v_renuncias_pendientes        |  SELECT r.id,                                                                                                                                                                                                                                 +
                               |     r.fecha_renuncia,                                                                                                                                                                                                                         +
                               |     r.motivo,                                                                                                                                                                                                                                 +
                               |     r.monto_a_devolver,                                                                                                                                                                                                                       +
                               |     c.id AS cliente_id,                                                                                                                                                                                                                       +
                               |     c.nombre_completo AS cliente_nombre,                                                                                                                                                                                                      +
                               |     c.numero_documento AS cliente_documento,                                                                                                                                                                                                  +
                               |     c.telefono AS cliente_telefono,                                                                                                                                                                                                           +
                               |     v.numero AS vivienda_numero,                                                                                                                                                                                                              +
                               |     p.nombre AS proyecto_nombre,                                                                                                                                                                                                              +
                               |     n.valor_total AS negociacion_valor_total,                                                                                                                                                                                                 +
                               |     (EXTRACT(day FROM (now() - r.fecha_renuncia)))::integer AS dias_pendiente                                                                                                                                                                 +
                               |    FROM (((((renuncias r                                                                                                                                                                                                                      +
                               |      JOIN negociaciones n ON ((n.id = r.negociacion_id)))                                                                                                                                                                                     +
                               |      JOIN clientes c ON ((c.id = n.cliente_id)))                                                                                                                                                                                              +
                               |      JOIN viviendas v ON ((v.id = r.vivienda_id)))                                                                                                                                                                                            +
                               |      JOIN manzanas m ON ((m.id = v.manzana_id)))                                                                                                                                                                                              +
                               |      JOIN proyectos p ON ((p.id = m.proyecto_id)))                                                                                                                                                                                            +
                               |   WHERE ((r.estado)::text = 'Pendiente Devoluci├│n'::text)                                                                                                                                                                                     +
                               |   ORDER BY r.fecha_renuncia;
 vista_clientes_resumen        |  SELECT c.id,                                                                                                                                                                                                                                 +
                               |     c.nombre_completo,                                                                                                                                                                                                                        +
                               |     c.tipo_documento,                                                                                                                                                                                                                         +
                               |     c.numero_documento,                                                                                                                                                                                                                       +
                               |     c.telefono,                                                                                                                                                                                                                               +
                               |     c.email,                                                                                                                                                                                                                                  +
                               |     c.estado,                                                                                                                                                                                                                                 +
                               |     c.origen,                                                                                                                                                                                                                                 +
                               |     c.fecha_creacion,                                                                                                                                                                                                                         +
                               |     count(n.id) AS total_negociaciones,                                                                                                                                                                                                       +
                               |     count(                                                                                                                                                                                                                                    +
                               |         CASE                                                                                                                                                                                                                                  +
                               |             WHEN ((n.estado)::text = 'Activa'::text) THEN 1                                                                                                                                                                                   +
                               |             ELSE NULL::integer                                                                                                                                                                                                                +
                               |         END) AS negociaciones_activas,                                                                                                                                                                                                        +
                               |     count(                                                                                                                                                                                                                                    +
                               |         CASE                                                                                                                                                                                                                                  +
                               |             WHEN ((n.estado)::text = 'Completada'::text) THEN 1                                                                                                                                                                               +
                               |             ELSE NULL::integer                                                                                                                                                                                                                +
                               |         END) AS negociaciones_completadas,                                                                                                                                                                                                    +
                               |     max(n.fecha_creacion) AS ultima_negociacion                                                                                                                                                                                               +
                               |    FROM (clientes c                                                                                                                                                                                                                           +
                               |      LEFT JOIN negociaciones n ON ((c.id = n.cliente_id)))                                                                                                                                                                                    +
                               |   GROUP BY c.id;
 vista_manzanas_disponibilidad |  SELECT m.id,                                                                                                                                                                                                                                 +
                               |     m.proyecto_id,                                                                                                                                                                                                                            +
                               |     m.nombre,                                                                                                                                                                                                                                 +
                               |     m.numero_viviendas AS total_viviendas,                                                                                                                                                                                                    +
                               |     count(v.id) AS viviendas_creadas,                                                                                                                                                                                                         +
                               |     (m.numero_viviendas - count(v.id)) AS viviendas_disponibles,                                                                                                                                                                              +
                               |         CASE                                                                                                                                                                                                                                  +
                               |             WHEN ((m.numero_viviendas - count(v.id)) > 0) THEN true                                                                                                                                                                           +
                               |             ELSE false                                                                                                                                                                                                                        +
                               |         END AS tiene_disponibles                                                                                                                                                                                                              +
                               |    FROM (manzanas m                                                                                                                                                                                                                           +
                               |      LEFT JOIN viviendas v ON ((m.id = v.manzana_id)))                                                                                                                                                                                        +
                               |   GROUP BY m.id, m.proyecto_id, m.nombre, m.numero_viviendas;
 vista_negociaciones_completas |  SELECT n.id,                                                                                                                                                                                                                                 +
                               |     n.estado,                                                                                                                                                                                                                                 +
                               |     n.valor_total,                                                                                                                                                                                                                            +
                               |     n.total_fuentes_pago,                                                                                                                                                                                                                     +
                               |     n.total_abonado,                                                                                                                                                                                                                          +
                               |     n.saldo_pendiente,                                                                                                                                                                                                                        +
                               |     n.porcentaje_pagado,                                                                                                                                                                                                                      +
                               |     n.fecha_negociacion,                                                                                                                                                                                                                      +
                               |     n.fecha_cierre_financiero,                                                                                                                                                                                                                +
                               |     c.id AS cliente_id,                                                                                                                                                                                                                       +
                               |     c.nombre_completo AS cliente_nombre,                                                                                                                                                                                                      +
                               |     c.numero_documento AS cliente_documento,                                                                                                                                                                                                  +
                               |     c.telefono AS cliente_telefono,                                                                                                                                                                                                           +
                               |     c.email AS cliente_email,                                                                                                                                                                                                                 +
                               |     v.id AS vivienda_id,                                                                                                                                                                                                                      +
                               |     v.numero AS vivienda_numero,                                                                                                                                                                                                              +
                               |     v.tipo_vivienda,                                                                                                                                                                                                                          +
                               |     v.valor_total AS vivienda_valor_original,                                                                                                                                                                                                 +
                               |     m.nombre AS manzana_nombre,                                                                                                                                                                                                               +
                               |     p.nombre AS proyecto_nombre                                                                                                                                                                                                               +
                               |    FROM ((((negociaciones n                                                                                                                                                                                                                   +
                               |      JOIN clientes c ON ((n.cliente_id = c.id)))                                                                                                                                                                                              +
                               |      JOIN viviendas v ON ((n.vivienda_id = v.id)))                                                                                                                                                                                            +
                               |      LEFT JOIN manzanas m ON ((v.manzana_id = m.id)))                                                                                                                                                                                         +
                               |      LEFT JOIN proyectos p ON ((m.proyecto_id = p.id)));
 vista_viviendas_abonos        |  SELECT v.id,                                                                                                                                                                                                                                 +
                               |     v.numero,                                                                                                                                                                                                                                 +
                               |     v.manzana_id,                                                                                                                                                                                                                             +
                               |     v.estado,                                                                                                                                                                                                                                 +
                               |     v.cliente_id,                                                                                                                                                                                                                             +
                               |     v.valor_total,                                                                                                                                                                                                                            +
                               |     v.fecha_asignacion,                                                                                                                                                                                                                       +
                               |     v.fecha_pago_completo,                                                                                                                                                                                                                    +
                               |     COALESCE(sum(a.monto), (0)::numeric) AS total_abonado,                                                                                                                                                                                    +
                               |     (v.valor_total - COALESCE(sum(a.monto), (0)::numeric)) AS saldo_pendiente,                                                                                                                                                                +
                               |         CASE                                                                                                                                                                                                                                  +
                               |             WHEN (v.valor_total > (0)::numeric) THEN round(((COALESCE(sum(a.monto), (0)::numeric) * 100.0) / (v.valor_total)::numeric), 2)                                                                                                    +
                               |             ELSE (0)::numeric                                                                                                                                                                                                                 +
                               |         END AS porcentaje_pagado,                                                                                                                                                                                                             +
                               |     count(a.id) AS cantidad_abonos                                                                                                                                                                                                            +
                               |    FROM (viviendas v                                                                                                                                                                                                                          +
                               |      LEFT JOIN abonos a ON ((a.vivienda_id = v.id)))                                                                                                                                                                                          +
                               |   GROUP BY v.id, v.numero, v.manzana_id, v.estado, v.cliente_id, v.valor_total, v.fecha_asignacion, v.fecha_pago_completo;
(7 rows)


========================================

­ƒÄ¿ TIPOS ENUMERADOS

 enum_name | enum_value | enumsortorder 
-----------+------------+---------------
(0 rows)


========================================
Ô£à EXTRACCI├ôN COMPLETA FINALIZADA
========================================

